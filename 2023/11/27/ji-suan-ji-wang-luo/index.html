<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="计算机网络, 编程">
    <meta name="description" content="1.1 计算机网络在信息时代中的作用
互联网具有两个重要基本特点，连通性和共享。
连通性：互联网使上网用户之间，不管相距多远，都可以非常便捷、非常经济地交换各种信息。
共享指资源共享。资源共享可以是信息共享、软件共享，也可以是硬件共享。

">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>计算机网络 | 七破风的博客</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">七破风的博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>媒体</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/musics">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>音乐</span>
        </a>
      </li>
      
      <li>
        <a href="/movies">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>电影</span>
        </a>
      </li>
      
      <li>
        <a href="/books">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>书籍</span>
        </a>
      </li>
      
      <li>
        <a href="/galleries">
          
          <i class="fas fa-image" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>相册</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">七破风的博客</div>
        <div class="logo-desc">
            
            高高山顶立，深深海底行。
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			媒体
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/musics " style="margin-left:75px">
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>音乐</span>
                  </a>
                </li>
              
                <li>

                  <a href="/movies " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>电影</span>
                  </a>
                </li>
              
                <li>

                  <a href="/books " style="margin-left:75px">
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>书籍</span>
                  </a>
                </li>
              
                <li>

                  <a href="/galleries " style="margin-left:75px">
				  
				   <i class="fa fas fa-image" style="position: absolute;left:50px" ></i>
			      
		          <span>相册</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/9.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">计算机网络</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-11-27
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2023-11-27
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    33.6k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    116 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="1-1-计算机网络在信息时代中的作用"><a href="#1-1-计算机网络在信息时代中的作用" class="headerlink" title="1.1 计算机网络在信息时代中的作用"></a>1.1 计算机网络在信息时代中的作用</h1><ul>
<li>互联网具有两个重要基本特点，<strong>连通性</strong>和<strong>共享</strong>。<ol>
<li>连通性：互联网使上网用户之间，不管相距多远，都可以非常便捷、非常经济地交换各种信息。</li>
<li>共享指<strong>资源共享</strong>。资源共享可以是信息共享、软件共享，也可以是硬件共享。</li>
</ol>
</li>
</ul>
<h1 id="1-2-互联网概述"><a href="#1-2-互联网概述" class="headerlink" title="1.2 互联网概述"></a>1.2 互联网概述</h1><h2 id="1-2-1-网络的网络"><a href="#1-2-1-网络的网络" class="headerlink" title="1.2.1 网络的网络"></a>1.2.1 网络的网络</h2><ul>
<li><strong>计算机网络</strong>（简称为<strong>网络</strong>）由若干<strong>结点</strong>和连接这些结点的<strong>链路</strong>组成。网络中的结点可以是计算机、集线器、交换机或路由器等。图 1-1(a) 给出了一个具有四个结点和三条链路的网络。有三台计算机通过三条链路连接到一个集线器上，构成了一个简单的计算机网络。可以用一朵云表示一个网络。</li>
<li>网络之间通过路由器互连起来，构成覆盖范围更大的计算机网络。这样的网络称为<strong>互连网</strong>，如图1-1(b) 所示。因此互连网是“<strong>网络的网络</strong>”。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230630153611.png"></li>
<li><strong>网络把许多计算机连接在一起，而互连网则把许多网络通过路由器连接在一起。与网络相连的计算机常称为主机。</strong></li>
</ul>
<h2 id="1-2-2-互联网基础结构发展的三个阶段"><a href="#1-2-2-互联网基础结构发展的三个阶段" class="headerlink" title="1.2.2 互联网基础结构发展的三个阶段"></a>1.2.2 <strong>互联网基础结构发展的三个阶段</strong></h2><ul>
<li>第一阶段是从单个网络 ARPANET 向互连网发展的过程。</li>
<li>第二阶段的特点是建成了<strong>三级结构的互联网</strong>。</li>
<li>第三阶段的特点是逐渐形成了<strong>多层次 ISP 结构的互联网</strong>。</li>
</ul>
<h2 id="1-2-3-互联网的标准化工作"><a href="#1-2-3-互联网的标准化工作" class="headerlink" title="1.2.3 互联网的标准化工作"></a>1.2.3 <strong>互联网的标准化工作</strong></h2><ul>
<li>国际性组织<strong>互联网协会</strong> (简称 ISOC)，对互联网进行全面管理以及在世界范围内促进其发展和使用。ISOC 下面有一个技术组织叫做<strong>互联网体系结构委员会</strong> (简称 IAB)，负责管理互联网有关协议的开发。IAB 下面又设有两个工程部：<ol>
<li><strong>互联网工程部</strong>（简称 IETF）</li>
<li><strong>互联网研究部</strong>（简称 IRTF）</li>
</ol>
</li>
<li>制定互联网的正式标准要经过以下三个阶段：<ol>
<li><strong>互联网草案</strong>——互联网草案的有效期只有六个月。在这个阶段还不能算是 RFC 文档。</li>
<li><strong>建议标准</strong>——从这个阶段开始就成为 RFC 文档。</li>
<li><strong>互联网标准</strong>——达到正式标准后，每个标准就分配到一个编号 STD xx。一个标准可以和多个RFC 文档关联。截止到 2016 年 7 月，互联网标准的最大编号是 STD 83。</li>
</ol>
</li>
</ul>
<h1 id="1-3-互联网的组成"><a href="#1-3-互联网的组成" class="headerlink" title="1.3 互联网的组成"></a>1.3 互联网的组成</h1><ul>
<li>互联网的拓扑结构非常复杂，并且覆盖了全球，从工作方式上看，划分为以下两大块：<ol>
<li><strong>边缘部分</strong>：由所有连接在互联网上的主机组成。<strong>用户直接使用</strong>，用来进行通信和资源共享。</li>
<li><strong>核心部分</strong>：由大量网络和连接这些网络的路由器组成。<strong>为边缘部分提供服务的</strong>。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230630205219.png"></li>
</ol>
</li>
</ul>
<h2 id="1-3-1-互联网的边缘部分"><a href="#1-3-1-互联网的边缘部分" class="headerlink" title="1.3.1 互联网的边缘部分"></a>1.3.1 <strong>互联网的边缘部分</strong></h2><ol>
<li><strong>计算机之间通信</strong>：<strong>主机 A 的某个进程和主机 B 上的另一个进程进行通信</strong></li>
<li><strong>客户——服务器方式</strong><ul>
<li><strong>客户</strong>和<strong>服务器</strong>是指通信中所涉及的两个应用进程。客户——服务器方式所描述的是进程之间服务和被服务的关系。</li>
<li><strong>客户是服务请求方，服务器是服务提供方。</strong></li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230630205735.png"></li>
<li><strong>客户程序：</strong><ol>
<li>被用户调用后运行，在通信时主动向远地服务器发起通信（请求服务）。客户程序必须知道服务器程序的地址。</li>
<li>不需要特殊的硬件和复杂的操作系统。</li>
</ol>
</li>
<li><strong>服务器程序：</strong><ol>
<li>是一种用来提供某种服务的程序，<strong>可同时处理</strong>多个远地或本地客户的请求。</li>
<li>系统启动后即自动调用并一直不断地运行着，被动地等待并接受来自各地的客户的通信请求。服务器程序不需要知道客户程序的地址。</li>
<li>需要有强大的硬件和高级的操作系统支持。</li>
</ol>
</li>
</ul>
</li>
<li><strong>对等连接方式</strong><ul>
<li><strong>对等连接</strong> (简称 P2P) 指两台主机在通信时并不区分哪一个是服务请求方哪一个是服务提供方。只要两台主机运行了对等连接软件 (P2P 软件)，就可以进行平等的、对等连接通信。双方都可以下载对方已经存储在硬盘中的共享文档。因此这种工作方式也称为 <strong>P2P 方式</strong> 。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230630223247.png"></li>
</ul>
</li>
</ol>
<h2 id="1-3-2-互联网的核心部分"><a href="#1-3-2-互联网的核心部分" class="headerlink" title="1.3.2 互联网的核心部分"></a>1.3.2 互联网的核心部分</h2><ol>
<li>在网络核心部分起特殊作用的是<strong>路由器</strong>，是一种专用计算机。路由器是实现<strong>分组交换</strong>的关键构件，任务是<strong>转发收到的分组</strong>，是网络核心部分最重要的功能。</li>
<li><strong>电路交换的主要特点</strong><ul>
<li>从通信资源的分配角度来看，<strong>交换</strong>是按照某种方式动态地分配传输线路的资源</li>
<li>必须经过“<strong>建立连接</strong> (占用通信资源) →<strong>通话</strong> (一直占用通信资源) →<strong>释放连接</strong> (归还通信资源) ”三个步骤的交换方式称为<strong>电路交换</strong>。</li>
<li><strong>在通话的全部时间内，通话的两个用户始终占用端到端的通信资源</strong>。</li>
<li>使用电路交换来传送计算机数据时，<strong>线路的传输效率很低</strong>。因为计算机数据是突发式地出现在传输线路上的，因此线路上真正用来传送数据的时间很短。已被用户占用的通信线路资源在绝大部分时间里都是空闲的。</li>
</ul>
</li>
<li><strong>分组交换的主要特点</strong><ul>
<li>分组交换采用<strong>存储转发</strong>技术。</li>
<li>把要发送的整块数据称为一个<strong>报文</strong>。在发送报文前，把较长的报文划分成为一个个更小的等长数据段。在每一个数据段前，加上由必要的控制信息组成的<strong>首部</strong> (包头) 后，构成一个<strong>分组</strong> (包)。分组是在互联网中传送的数据单元。分组的首部包含目的地址和源地址等，使分组能在互联网中独立地选择传输路径，并被正确地交付到分组传输的终点。</li>
<li>位于网络边缘的主机和位于网络核心部分的路由器都是计算机，但作用不一样。<strong>主机是为用户进行信息处理的</strong>，并且可以和其他主机通过网络交换信息。<strong>路由器则是用来转发分组的，进行分组交换的</strong>。路由器收到一个分组，先暂时存储，检查其首部，查找转发表，按照首部中的目的地址，找到合适的接口转发出去，把分组交给下一个路由器。这样一步一步地以存储转发的方式，把分组交付最终的目的主机。各路由器之间必须经常交换彼此掌握的路由信息，以便创建和动态维护路由器中的转发表，使得转发表能够在整个网络拓扑发生变化时及时更新。</li>
<li><strong>分组交换的优点</strong>：<ol>
<li>高效：在分组传输的过程中动态分配传输带宽，对通信链路是逐段占用</li>
<li>灵活：为每一个分组选择合适的转发路由</li>
<li>迅速：以分组作为传送单位，可以不先建立连接就能向其他主机发送分组</li>
<li>可靠：保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性</li>
</ol>
</li>
<li><strong>分组交换的缺点</strong>：<ol>
<li>分组在各路由器存储转发时需要排队，会造成<strong>时延</strong>。由于分组交换不像电路交换那样通过建立连接来保证通信时所需的各种资源，因而无法确保通信时端到端所需的带宽。</li>
<li>各分组必须携带的控制信息造成了<strong>开销</strong>。分组交换网需要专门的管理和控制机制。</li>
</ol>
</li>
</ul>
</li>
</ol>
<ul>
<li>三种交换的比较<ol>
<li><strong>电路交换</strong>——整个报文的比特流连续地从源点直达终点</li>
<li><strong>报文交换</strong>——整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。</li>
<li><strong>分组交换</strong>——单个分组 (这只是整个报文的一部分) 传送到相邻结点，存储下来后查找转发表，转发到下一个结点。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230701111637.png"></li>
</ol>
</li>
</ul>
<h1 id="1-4-计算机网络在我国的发展"><a href="#1-4-计算机网络在我国的发展" class="headerlink" title="1.4 计算机网络在我国的发展"></a>1.4 计算机网络在我国的发展</h1><h1 id="1-5-计算机网络的类别"><a href="#1-5-计算机网络的类别" class="headerlink" title="1.5 计算机网络的类别"></a>1.5 计算机网络的类别</h1><h2 id="1-5-1-计算机网络的定义"><a href="#1-5-1-计算机网络的定义" class="headerlink" title="1.5.1 计算机网络的定义"></a>1.5.1 计算机网络的定义</h2><ul>
<li><strong>计算机网络的定义</strong><ol>
<li>计算机网络：计算机网络主要是由一些通用的、可编程的硬件互连而成的，这些硬件并非专门用来实现某一特定目的，它们能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。<ul>
<li>计算机网络所连接的硬件，并不限于一般的计算机，还包括了智能手机；计算机网络并非专门用来传送数据，还能支持很多种的应用。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="1-5-2-几种不同类别的计算机网络"><a href="#1-5-2-几种不同类别的计算机网络" class="headerlink" title="1.5.2 几种不同类别的计算机网络"></a>1.5.2 几种不同类别的计算机网络</h2><ul>
<li><strong>几种不同类别的计算机网络</strong><ol>
<li><strong>按照网络的作用范围进行分类</strong><ul>
<li><strong>广域网</strong> (WAN) 作用范围通常为几十到几千公里，也称<strong>远程网</strong>。广域网是互联网的核心部分，任务是长距离运送主机所发送的数据。连接广域网各结点交换机的链路一般都是高速链路，具有较大的通信容量。</li>
<li><strong>城域网</strong> (MAN) 作用范围一般是城市，跨越几个街区甚至整个城市，作用距离约为 5～50km。城域网可以为一个或几个单位所拥有，也可以是一种公用设施，用来将多个局域网进行互连。目前很多城域网采用的是以太网技术，因此有时也常并入局域网的范围进行讨论。</li>
<li><strong>局域网</strong> (LAN) 一般用微型计算机或工作站通过高速通信线路相连 (速率通常在10Mbit&#x2F;s 以上)，但地理上则局限在较小的范围 (如 1km 左右)。在局域网发展的初期，一个学校或工厂往往只拥有一个局域网，但现在局域网已非常广泛地使用，学校或企业大都拥有许多个互连的局域网 (这样的网络常称为<strong>校园网</strong>或<strong>企业网</strong>)。</li>
<li><strong>个人区域网</strong> (PAN) 在个人工作的地方把属于个人使用的电子设备 (如便携式电脑) 用无线技术连接起来的网络，因此也常称为<strong>无线个人区域网</strong> (WPAN)，其范围很小，大约在10m左右。</li>
</ul>
</li>
<li><strong>按照网络的使用者进行分类</strong><ul>
<li><strong>公用网</strong>：电信公司 (国有或私有) 出资建造的大型网络。“公用”的意思就是所有愿意按电信公司的规定交纳费用的人都可以使用这种网络。因此公用网也可称为<strong>公众网</strong>。</li>
<li><strong>专用网</strong>：某个部门为满足本单位的特殊业务工作的需要而建造的网络。这种网络不向本单位以外的人提供服务。例如，军队、铁路、银行、电力等系统均有本系统的专用网。</li>
</ul>
</li>
<li><strong>用来把用户接入到互联网的网络</strong><ul>
<li><strong>接入网</strong> (AN)，又称为<strong>本地接入网</strong>或<strong>居民接入网</strong></li>
<li>接入网本身既不属于互联网的核心部分，也不属于互联网的边缘部分。是从某个用户端系统到互联网中的第一个路由器之间的一种网络。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="1-6-计算机网络的性能"><a href="#1-6-计算机网络的性能" class="headerlink" title="1.6 计算机网络的性能"></a>1.6 计算机网络的性能</h1><h2 id="1-6-1-计算机网络的性能"><a href="#1-6-1-计算机网络的性能" class="headerlink" title="1.6.1 计算机网络的性能"></a>1.6.1 计算机网络的性能</h2><ul>
<li><strong>计算机网络的性能指标</strong><ol>
<li>速率<ul>
<li><strong>比特</strong>来源于 binary digit，意思是一个“<strong>二进制数字</strong>”，因此一个比特就是二进制数字中的一个 1 或 0。</li>
<li>比特也是信息论中使用的<strong>信息量的单位</strong>。网络技术中的<strong>速率</strong>指的是<strong>数据的传送速率</strong>，它也称为<strong>数据率</strong>或<strong>比特率</strong>。</li>
</ul>
</li>
<li><strong>带宽</strong><ul>
<li>带宽本指某个<strong>信号具有的频带宽度</strong>。信号的带宽指该信号所包含的各种不同频率成分所占据的频率范围。这种意义的<strong>带宽的单位</strong>是<strong>赫</strong> (或<strong>千赫、兆赫、吉赫</strong>等)。表示某信道允许通过的信号频带范围称为该信道的<strong>带宽</strong> (<strong>通频带</strong>)。</li>
<li>在计算机网络中，带宽用来表示网络中某<strong>通道</strong>传送数据的能力，因此网络带宽表示在单位时间内网络中的某信道所能通过的“<strong>最高数据率</strong>”。这种意义的<strong>带宽的单位</strong>就是<strong>数据率的单位</strong> bit&#x2F;s，是<strong>比特每秒</strong>。</li>
<li>在“带宽”的上述两种表述中，前者为<strong>频域</strong>称谓，而后者为<strong>时域</strong>称谓，其本质是相同的。也就是说，一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高。</li>
</ul>
</li>
<li><strong>吞吐量</strong><ul>
<li><strong>吞吐量</strong>表示在单位时间内通过某个网络的实际的数据量。</li>
<li>吞吐量受网络的带宽或网络的额定速率的限制。</li>
</ul>
</li>
<li><strong>时延</strong><ul>
<li><strong>时延</strong>指数据从网络的一端传送到另一端所需的时间。</li>
<li>时延是很重要的性能指标，有时也称为延迟或迟延。</li>
<li>时延由以下组成：<ol>
<li><strong>发送时延</strong>　发送时延是主机或路由器发送数据帧所需要的时间，从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。因此发送时延也叫做<strong>传输时延</strong>。发送时延的计算公式是：<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230701153549.png"></li>
<li>发送时延并非固定不变，而是与发送的帧长成正比，与发送速率成反比。</li>
</ul>
</li>
<li><strong>传播时延</strong>　传播时延是电磁波在信道中传播一定的距离需要花费的时间。传播时延的计算公式是：<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230701153757.png"></li>
<li>发送时延发生在机器内部的发送器中，<strong>与传输信道的长度 (或信号传送的距离) 没有关系</strong>。传播时延发生在机器外部的传输信道媒体上，<strong>与信号的发送速率无关</strong>。<strong>信号传送的距离越远，传播时延就越大</strong>。</li>
</ul>
</li>
<li><strong>处理时延</strong> 　主机或路由器在收到分组时要花费时间进行处理，例如分析分组的首部、从分组中提取数据部分、进行差错检验或查找适当的路由等，这就产生了处理时延。</li>
<li><strong>排队时延</strong> 　分组在经过网络传输时，要经过许多路由器。但分组在进入路由器后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发。这就产生了排队时延。排队时延的长短往往取决于网络当时的通信量。当网络的通信量很大时会发生队列溢出，使分组丢失，这相当于排队时延为无穷大。</li>
<li>数据在网络中经历的总时延就是四种时延之和：<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230702225623.png"></li>
</ul>
</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230702163416.png"></li>
<li><strong>对于高速网络链路，提高的仅是数据的发送速率而不是比特在链路上的传播速率</strong>。</li>
<li><strong>提高数据的发送速率减小了数据的发送时延</strong>。数据的发送速率的单位是每秒发送多少个比特，指在<strong>某个点</strong>或<strong>某个接口上</strong>的发送速率。而传播速率的单位是每秒传播多少公里，指在<strong>某一段传输线路上</strong>比特的传播速率。</li>
</ol>
</li>
</ul>
</li>
<li><strong>时延带宽积</strong><ul>
<li>把网络性能的两个度量——传播时延和带宽相乘，就得到另一个度量：传播<strong>时延带宽积</strong><ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230702163707.png"></li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230702164122.png"></li>
</ol>
</li>
<li>若发送端连续发送数据，则在发送的第一个比特即将达到终点时，发送端就已经发送了20 万个比特，而这 20 万个比特都正在链路上向前移动。因此，链路的时延带宽积又称为<strong>以比特为单位的链路长度</strong>。</li>
</ul>
</li>
<li><strong>往返时间 RTT</strong><ul>
<li>互联网上的信息不是单向传输而是双向交互的。</li>
<li>A 向 B 发送数据。如果数据长度是 100MB，发送速率是 100Mbit&#x2F;s，那么<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230702164237.png"></li>
<li>如果 B 正确收完 100MB 的数据后，就立即向 A 发送确认。再假定 A 只有在收到 B 的确认信息后，才能继续向 B 发送数据。显然，这需要等待一个往返时间 RTT (这里假定确认信息很短，可忽略 B 发送确认的时间)。如果 RTT＝2s，那么可以算出 A 向 B 发送数据的有效数据率。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230702164313.png"></li>
</ol>
</li>
</ul>
</li>
<li><strong>利用率</strong><ul>
<li><strong>利用率</strong>有信道利用率和网络利用率两种。<ol>
<li>信道利用率指出某信道有百分之几的时间是被利用的。完全空闲的信道利用率是零。</li>
<li>网络利用率是全网络信道利用率的加权平均值。</li>
<li>信道利用率并非越高越好。根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也迅速增加。和高速公路的情况有些相似。当高速公路上的车流量很大时，由于在公路上的某些地方会出现堵塞，因此行车所需的时间就会变长。同样，当网络的通信量很少时，网络产生的时延并不大。但在网络通信量不断增大的情况下，由于分组在网络结点、进行处理时需要排队等候，因此网络引起的时延就会增大。</li>
</ol>
</li>
<li>如果令 <em>D<sub>0</sub></em> 表示网络空闲时的时延，<em>D</em> 表示网络当前的时延，用下面的公式来表示 <em>D</em>，<em>D<sub>0</sub></em> 和利用率 <em>U</em> 之间的关系：<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230702165329.png"></li>
<li><em>U</em> 是网络的利用率，数值在 0 到 1 之间。当网络的利用率达到其容量的 1&#x2F;2 时，时延就要加倍。</li>
<li>当网络的利用率接近最大值 1 时，网络的时延就趋于无穷大。</li>
<li><strong>信道或网络的利用率过高会产生非常大的时延</strong></li>
<li>一些拥有较大主干网的 ISP 通常控制信道利用率不超过 50％。如果超过了就要准备扩容，增大线路的带宽。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230702205609.png"></li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="1-6-2-计算机网络的非性能特征"><a href="#1-6-2-计算机网络的非性能特征" class="headerlink" title="1.6.2 计算机网络的非性能特征"></a>1.6.2 计算机网络的非性能特征</h2><ul>
<li><strong>计算机网络的非性能特征</strong><ol>
<li><strong>费用</strong><ul>
<li>网络的性能与其价格密切相关。网络的速率越高，价格也越高。</li>
</ul>
</li>
<li><strong>质量</strong><ul>
<li>网络的质量取决于网络中所有构件的质量，以及这些构件是怎样组成网络的。网络的质量影响很多方面，如网络的可靠性、网络管理的简易性，以及网络的性能。但网络的性能与网络的质量并不一样。</li>
</ul>
</li>
<li><strong>标准化</strong><ul>
<li>网络的硬件和软件的设计既可以按照通用的国际标准，也可以遵循特定的专用网络标准。采用国际标准的设计，可以得到更好的互操作性，更易于升级换代和维修，也更容易得到技术上的支持。</li>
</ul>
</li>
<li><strong>可靠性</strong><ul>
<li>可靠性与网络的质量和性能密切相关。高速网络的可靠性不一定很差。但高速网络要可靠地运行，则往往更加困难，同时所需的费用也会较高。</li>
</ul>
</li>
<li><strong>可扩展性和可升级性</strong><ul>
<li>在构造网络时应当考虑到今后需要扩展和升级。网络的性能越高，其扩展费用往往也越高，难度也会相应增加。</li>
</ul>
</li>
<li><strong>易于管理和维护</strong><ul>
<li>网络如果没有良好的管理和维护，很难达到和保持所设计的性能。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="1-7-计算机网络体系结构"><a href="#1-7-计算机网络体系结构" class="headerlink" title="1.7 计算机网络体系结构"></a>1.7 计算机网络体系结构</h1><ul>
<li>在计算机网络的基本概念中，分层次的体系结构是最基本的。</li>
</ul>
<h2 id="1-7-1-计算机网络体系结构的形成"><a href="#1-7-1-计算机网络体系结构的形成" class="headerlink" title="1.7.1 计算机网络体系结构的形成"></a>1.7.1 计算机网络体系结构的形成</h2><ul>
<li><strong>计算机网络体系结构的形成</strong><ol>
<li>计算机网络是个复杂的系统。、设想一种最简单的情况：连接在网络上的两台计算机要互相传送文件。在这两台计算机之间必须有一条传送数据的通路。但还有以下工作需要完成：<ul>
<li>发起通信的计算机必须将数据通信的通路进行<strong>激活</strong>，即发出一些信令，保证要传送的计算机数据能在这条通路上正确发送和接收。</li>
<li>要告诉网络如何识别接收数据的计算机。</li>
<li>发起通信的计算机必须查明对方计算机是否已开机，并且与网络连接正常。</li>
<li>发起通信的计算机中的应用程序必须清楚，在对方计算机中的文件管理程序是否已做好接收文件和存储文件的准备工作。</li>
<li>若计算机的文件格式不兼容，则至少其中一台计算机应完成格式转换功能。</li>
<li>对出现的各种差错和意外事故，如数据传送错误、重复或丢失，网络中某个结点交换机出现故障等，应当有可靠的措施保证对方计算机最终能够收到正确的文件。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="1-7-2-协议与划分层次"><a href="#1-7-2-协议与划分层次" class="headerlink" title="1.7.2 协议与划分层次"></a>1.7.2 协议与划分层次</h2><ul>
<li><strong>协议与划分层次</strong><ol>
<li>在计算机网络中要做到有条不紊地交换数据，必须遵守一些事先约定好的规则。<strong>这些规则明确规定了所交换的数据的格式以及有关的同步问题</strong>。</li>
<li><strong>为进行网络中的数据交换而建立的规则、标准或约定</strong>称为<strong>网络协议</strong>。网络协议也可简称为<strong>协议</strong>，主要由以下三个要素组成：<ul>
<li>语法，即数据与控制信息的结构或格式；</li>
<li>语义，即需要发出何种控制信息，完成何种动作以及做出何种响应；</li>
<li>同步，即事件实现顺序的详细说明。</li>
</ul>
</li>
<li>协议通常有两种不同的形式。一种是使用便于人来阅读和理解的文字描述。另一种是使用让计算机能够理解的程序代码。这两种不同形式的协议都必须能够对网络上的信息交换过程做出精确的解释。</li>
<li>分层可以带来很多好处。如：<ul>
<li><strong>各层之间是独立的</strong>。某一层并不需要知道它的下一层是如何实现的，而仅仅需要知道该层通过层间的接口所提供的服务。由于每一层只实现一种相对独立的功能，因而可将一个难以处理的复杂问题分解为若干个较容易处理的更小一些的问题。整个问题的复杂程度就下降了。</li>
<li><strong>灵活性好</strong>。当任何一层发生变化时，只要层间接口关系保持不变，则在这层以上或以下各层均不受影响。此外，对某一层提供的服务还可进行修改。当某层提供的服务不再需要时，甚至可以将这层取消。</li>
<li><strong>结构上可分割开</strong>。各层都可以采用最合适的技术来实现。</li>
<li><strong>易于实现和维护</strong>。这种结构使得实现和调试一个庞大而又复杂的系统变得易于处理，因为整个的系统已被分解为若干个相对独立的子系统。</li>
<li><strong>能促进标准化工作</strong>。因为每一层的功能及其所提供的服务都已有了精确的说明。</li>
</ul>
</li>
<li>分层时应使每一层的功能非常明确。若层数太少，就会使每一层的协议太复杂。但层数太多又会在描述和综合各层功能的系统工程任务时遇到较多的困难。通常各层所要完成的功能主要有以下一些：<ul>
<li><strong>差错控制</strong> 　使相应层次对等方的通信更加可靠。</li>
<li><strong>流量控制</strong> 　发送端的发送速率必须使接收端来得及接收，不能太快。</li>
<li><strong>分段和重装</strong> 　发送端将要发送的数据块划分为更小的单位，在接收端将其还原。</li>
<li><strong>复用和分用</strong> 　发送端几个高层会话复用一条低层的连接，在接收端再进行分用。</li>
<li><strong>连接建立和释放</strong> 　交换数据前先建立一条逻辑连接，数据传送结束后释放连接。</li>
<li>分层也有一些缺点，例如，有些功能会在不同的层次中重复出现，产生额外开销。</li>
</ul>
</li>
<li><strong>计算机网络的各层及其协议的集合</strong>就是网络的<strong>体系结构</strong>。换种说法，<strong>计算机网络的体系结构就是这个计算机网络及其构件所应完成的功能的精确定义</strong>。</li>
<li><strong>体系结构是抽象的，而实现则是具体的，是真正在运行的计算机硬件和软件</strong>。</li>
</ol>
</li>
</ul>
<h2 id="1-7-3-具有五层协议的体系结构"><a href="#1-7-3-具有五层协议的体系结构" class="headerlink" title="1.7.3 具有五层协议的体系结构"></a>1.7.3 具有五层协议的体系结构</h2><ul>
<li><strong>具有五层协议的体系结构</strong><ol>
<li><strong>应用层</strong><ul>
<li>应用层是体系结构中的最高层。</li>
<li>应用层的任务是<strong>通过应用进程间的交互来完成特定网络应用</strong>。</li>
<li>应用层协议定义的是<strong>应用进程间通信和交互的规则</strong>。<strong>进程</strong>指主机中<strong>正在运行的程序</strong>。</li>
<li>应用层交互的数据单元称为<strong>报文</strong>。</li>
</ul>
</li>
<li><strong>运输层</strong><ul>
<li>运输层的任务是负责向<strong>两台主机中进程之间的通信</strong>提供<strong>通用的数据传输</strong>服务。</li>
<li>运输层主要使用以下两种协议：<ol>
<li><strong>传输控制协议</strong> (TCP)——提供面向连接的、可靠的数据传输服务，其数据传输的单位是<strong>报文段</strong>。</li>
<li><strong>用户数据报协议</strong> (UDP)——提供无连接的、<strong>尽最大努力</strong>的数据传输服务，其数据传输的单位是<strong>用户数据报</strong>。</li>
</ol>
</li>
</ul>
</li>
<li><strong>网络层</strong><ul>
<li>网络层负责为分组交换网上的不同<strong>主机</strong>提供通信服务。</li>
<li>在发送数据时，网络层把运输层产生的报文段或用户数据报封装成<strong>分组</strong>或<strong>包</strong>进行传送。</li>
<li>在 TCP&#x2F;IP 体系中，由于网络层使用 IP 协议，因此分组也叫做 <strong>IP 数据报</strong>，简称<strong>数据报</strong>。</li>
<li><strong>无论在哪一层传送的数据单元，都可笼统地用“分组”来表示</strong>。</li>
<li>网络层的另一个任务是要选择合适的路由，使源主机运输层所传下来的分组，能够通过网络中的路由器找到目的主机。</li>
<li>网络层中的“<strong>网络</strong>”，不是我们谈到的具体网络，而是在计算机网络体系结构模型中的第 3 层的名称。</li>
<li>互联网是由大量的<strong>异构</strong>网络通过<strong>路由器</strong>相互连接起来的，使用的网络层协议是无连接的<strong>网际协议</strong> (IP) 和许多种路由选择协议，因此互联网的网络层也叫做<strong>网际层</strong>或 <strong>IP 层</strong>。</li>
</ul>
</li>
<li><strong>数据链路层</strong><ul>
<li>数据链路层简称<strong>链路层</strong>。</li>
<li>在两个相邻结点之间传送数据时，数据链路层将网络层交下来的 IP 数据报<strong>组装成帧</strong>，在两个相邻结点间的链路上传送<strong>帧</strong>。每一帧包括数据和<strong>控制信息</strong>。</li>
</ul>
</li>
<li><strong>物理层</strong><ul>
<li>在物理层上所传数据的单位是<strong>比特</strong>。</li>
</ul>
</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230703110014.png"></li>
<li>图1-19 说明应用进程的数据在各层之间的传递过程中所经历的变化。假定两台主机通过一台路由器连接起来。<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230703110122.png"></li>
<li>假定主机1的应用进程AP 1 向主机2的应用进程AP 2 传送数据。AP 1 先将其数据交给本主机的第5层（应用层）。第5层加上必要的控制信息H 5 就变成了下一层的数据单元。第4层（运输层）收到这个数据单元后，加上本层的控制信息H 4 ，再交给第3层（网络层），成为第3层的数据单元。依此类推。不过到了第2层（数据链路层）后，控制信息被分成两部分，分别加到本层数据单元的首部（H 2 ）和尾部（T 2 ）；而第1层（物理层）由于是比特流的传送，所以不再加上控制信息。请注意，传送比特流时应从首部开始传送。</li>
<li>OSI参考模型把对等层次之间传送的数据单位称为该层的<strong>协议数据单元</strong>（PDU）。这个名词现已被许多非OSI标准采用。</li>
<li>当这一串的比特流离开主机1经网络的物理媒体传送到路由器时，就从路由器的第1层依次上升到第3层。每一层都根据控制信息进行必要的操作，然后将控制信息剥去，将该层剩下的数据单元上交给更高的一层。当分组上升到了第3层时，就根据首部中的目的地址查找路由器中的转发表，找出转发分组的接口，然后往下传送到第2层，加上新的首部和尾部后，再到最下面的第1层，然后在物理媒体上把每一个比特发送出去。</li>
<li>当这一串的比特流离开路由器到达目的站主机2时，就从主机2的第1层按照上面讲过的方式，依次上升到第5层。最后，把应用进程AP 1 发送的数据交给目的站的应用进程AP 2 。</li>
<li>可以用一个简单例子来比喻上述过程。有一封信从最高层向下传。每经过一层就包上一个新的信封，写上必要的地址信息。包有多个信封的信件传送到目的站后，从第1层起，每层拆开一个信封后就把信封中的信交给它的上一层。传到最高层后，取出发信人所发的信交给收信人。</li>
<li>虽然应用进程数据要经过如图1-19所示的复杂过程才能送到终点的应用进程，但这些复杂过程对用户来说，却都被屏蔽掉了，以致应用进程AP 1 觉得好像是直接把数据交给了应用进程AP 2 。同理，任何两个同样的层次（例如在两个系统的第4层）之间，也好像如同图1-19中的水平虚线所示的那样，把数据（即数据单元加上控制信息）通过水平虚线直接传递给对方。这就是所谓的“<strong>对等层</strong> ”（peer layers）之间的通信。我们以前经常提到的各层协议，实际上就是在各个对等层之间传递数据时的各项规定。</li>
<li>在文献中也还可以见到术语“<strong>协议栈</strong>”。这是因为几个层次画在一起很像一个<strong>栈</strong>的结构。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="1-7-4-实体、协议、服务和服务访问点"><a href="#1-7-4-实体、协议、服务和服务访问点" class="headerlink" title="1.7.4 实体、协议、服务和服务访问点"></a>1.7.4 实体、协议、服务和服务访问点</h2><ul>
<li><strong>实体、协议、服务和服务访问点</strong><ol>
<li>当研究开放系统中的信息交换时，使用<strong>实体</strong>这一抽象的名词表示<strong>任何可发送或接收信息的硬件或软件进程</strong>。</li>
<li><strong>协议是控制两个对等实体</strong> (或<strong>多个实体</strong>) <strong>进行通信的规则的集合</strong>。协议的语法方面规则定义了所交换信息的格式，协议的语义方面规则定义了发送者或接收者所要完成的操作，例如，在何种条件下，数据必须重传或丢弃。</li>
<li><strong>在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，还需要使用下面一层所提供的服务。</strong></li>
<li>协议和服务在概念上不一样：<ul>
<li>协议的实现保证了能够向上一层提供服务。使用本层服务的实体只能看见服务而无法看见下面的协议。下面的协议对上面的实体是透明的。</li>
<li><strong>协议是“水平的”</strong>，协议是控制对等实体之间通信的规则；但<strong>服务是“垂直的”</strong>，即服务是由下层向上层通过层间接口提供的。</li>
<li>并非在一个层内完成的全部功能都称为服务。只有能够被高一层实体“<strong>看得见</strong>”的功能才能称之为“服务”。上层使用下层所提供的服务必须通过与下层交换一些命令，这些命令在 OSI 中称为<strong>服务原语</strong>。</li>
<li>在同一系统中相邻两层的实体进行交互的地方，通常称为<strong>服务访问点</strong> (SAP)。服务访问点 SAP 是一个抽象的概念，是一个逻辑接口，有点像邮政信箱 (可以把邮件放入信箱和从信箱中取走邮件)，但这种层间接口和两个设备之间的硬件接口并不一样。</li>
<li>在任何相邻两层之间的关系可概括为图 1-20 所示的那样。第 n 层的两个“实体 (n) ”之间通过“协议 (n) ”进行通信，而第 n＋1 层的两个“实体 (n＋1) ”之间则通过另外的“协议 (n＋1) ”进行通信 (每一层都使用不同的协议) 。第 n 层向上面的第 n＋1 层所提供的服务实际上已包括了在它以下各层所提供的服务。第 n 层的实体对第 n+1 层的实体就相当于一个服务提供者。在服务提供者的上一层的实体又称为“服务用户”，因为它使用下层服务提供者所提供的服务。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230703113458.png"></li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="1-7-5-TCP-IP-的体系结构"><a href="#1-7-5-TCP-IP-的体系结构" class="headerlink" title="1.7.5 TCP&#x2F;IP 的体系结构"></a>1.7.5 TCP&#x2F;IP 的体系结构</h2><ul>
<li><strong>TCP&#x2F;IP 的体系结构</strong><ol>
<li>TCP&#x2F;IP 协议<strong>可以为应用提供服务</strong>，同时 TCP&#x2F;IP 协议也<strong>允许 IP 协议在网络构成的互联网上运行</strong>。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230703152732.png"></li>
</ol>
</li>
</ul>
<h1 id="本章的重要概念"><a href="#本章的重要概念" class="headerlink" title="本章的重要概念"></a>本章的重要概念</h1><ul>
<li>计算机网络把计算机连接在一起，互连网把网络连接在一起，是网络的网络。</li>
<li>以小写字母 i 开始的 internet (互连网) 是通用名词，泛指由多个计算机网络互连而成的网络。在这些网络之间的通信协议可以是任意的。</li>
<li>以大写字母 I 开始的 Internet (互联网) 是专用名词，指当前全球最大的、开放的、由网络相互连接而成的特定互连网，并采用 TCP&#x2F;IP 协议族作为通信规则。</li>
<li>互联网现在采用存储转发的分组交换技术，以及三层 ISP 结构。</li>
<li>互联网按工作方式划分为边缘部分与核心部分。主机在网络的边缘部分，其作用是进行信息处理。路由器在网络的核心部分，其作用是按存储转发方式进行分组交换。</li>
<li>计算机通信是计算机中进程之间的通信。计算机网络采用的通信方式是客户–服务器方式和对等连接方式 (P2P 方式)。</li>
<li>客户和服务器指通信中所涉及的应用进程。客户是服务请求方，服务器是服务提供方。</li>
<li>按作用范围的不同，计算机网络分为广域网 WAN、城域网 MAN、局域网 LAN 和个人区域网 PAN。</li>
<li>计算机网络常用的性能指标是：速率、带宽、吞吐量、时延 (发送时延、传播时延、处理时延、排队时延)、时延带宽积、往返时间和信道 (或网络) 利用率。</li>
<li>网络协议即协议，是为进行网络中的数据交换而建立的规则。计算机网络的各层及其协议的集合，称为网络的体系结构。</li>
<li>五层协议的体系结构由应用层、运输层、网络层 (或网际层)、数据链路层和物理层组成。运输层最重要的协议是 TCP 和 UDP 协议，而网络层最重要的协议是 IP 协议。</li>
</ul>
<h1 id="2-1-物理层的基本概念"><a href="#2-1-物理层的基本概念" class="headerlink" title="2.1 物理层的基本概念"></a>2.1 物理层的基本概念</h1><ul>
<li>物理层的作用是屏蔽掉传输媒体和通信手段的差异，使数据链路层感觉不到这些差异，只考虑如何完成本层的协议和服务，不考虑网络具体的传输媒体和通信手段是什么。</li>
<li>用于物理层的协议也常称为物理层<strong>规程</strong>。</li>
<li>将物理层的主要任务描述为确定与传输媒体的接口有关的一些特性，即：<ol>
<li><strong>机械特性</strong> 　指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置，等。</li>
<li><strong>电气特性</strong> 　指明在接口电缆的各条线上出现的电压的范围。</li>
<li><strong>功能特性</strong> 　指明某条线上出现的某一电平的电压的意义。</li>
<li><strong>过程特性</strong> 　指明对于不同功能的各种可能事件的出现顺序。</li>
</ol>
</li>
<li>数据在计算机内部多采用并行输出方式。但数据在通信线路上的传输方式一般是<strong>串行传输</strong>，即逐个比特按照时间顺序传输。物理层还要完成传输方式的转换。</li>
</ul>
<h1 id="2-2-数据通信的基础知识"><a href="#2-2-数据通信的基础知识" class="headerlink" title="2.2 数据通信的基础知识"></a>2.2 数据通信的基础知识</h1><h2 id="2-2-1-数据通信系统的模型"><a href="#2-2-1-数据通信系统的模型" class="headerlink" title="2.2.1  数据通信系统的模型"></a>2.2.1  数据通信系统的模型</h2><ul>
<li>如图 2-1 所示，数据通信系统可划分为三大部分，即<strong>源系统</strong>、<strong>传输系统</strong>和<strong>目的系统</strong>。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230704174305.png"></li>
</ol>
</li>
<li>源系统包括两个部分：<ol>
<li><strong>源点</strong> 　源点设备产生要传输的数据。源点又称为<strong>源站</strong>，或<strong>信源</strong>。</li>
<li><strong>发送器</strong> 　通常源点生成的数字比特流要通过发送器编码后才能在传输系统中进行传输。典型的发送器就是调制器。</li>
</ol>
</li>
<li>目的系统也包括两个部分：<ol>
<li><strong>接收器</strong> 　接收传输系统传送过来的信号，并把它转换为能够被目的设备处理的信息。典型的接收器是解调器，它把来自传输线路上的模拟信号进行解调，提取出在发送端置入的消息，还原出发送端产生的数字比特流。</li>
<li><strong>终点</strong> 　终点设备从接收器获取传送来的数字比特流，然后把信息输出。终点又称为<strong>目的站</strong>，或<strong>信宿</strong>。</li>
</ol>
</li>
<li>在源系统和目的系统之间的传输系统可以是简单的传输线，也可以是连接在源系统和目的系统之间的复杂网络系统。</li>
<li>通信的目的是传送<strong>消息</strong>。如话音、文字、图像、视频等都是消息。<strong>数据</strong>是运送消息的实体。根据RFC 4949 给出的定义，数据是使用特定方式表示的信息，是有意义的符号序列。这种信息的表示可用计算机或其他机器处理或产生。<strong>信号</strong>则是数据的电气或电磁的表现。</li>
<li>根据信号中代表消息的参数的取值方式不同，信号分为两大类：<ol>
<li><strong>模拟信号</strong>，或<strong>连续信号</strong>——代表消息的参数的取值是连续的。例如在图 2-1中，用户家中的调制解调器到电话端局之间的用户线上传送的就是模拟信号。</li>
<li><strong>数字信号</strong>，或<strong>离散信号</strong>——代表消息的参数的取值是离散的。例如在图 2-1中，用户家中的计算机到调制解调器之间，或在电话网中继线上传送的就是数字信号。在使用时间域 (或简称为时域) 的波形表示数字信号时，代表不同离散数值的基本波形就称为码元。在使用二进制编码时，只有两种不同的码元，一种代表 0 状态而另一种代表 1 状态。</li>
</ol>
</li>
</ul>
<h2 id="2-2-2-有关信道的几个基本概念"><a href="#2-2-2-有关信道的几个基本概念" class="headerlink" title="2.2.2 有关信道的几个基本概念"></a>2.2.2 有关信道的几个基本概念</h2><ul>
<li>信道用来表示向某一个方向传送信息的媒体。一条通信电路包含一条发送信道和一条接收信道。</li>
<li>从通信的双方信息交互的方式来看，有三种基本方式：<ol>
<li><strong>单向通信</strong> 　又称为<strong>单工通信</strong>，只有一个方向的通信而没有反方向的交互。</li>
<li><strong>双向交替通信</strong> 　又称为<strong>半双工通信</strong>，通信的双方都可以发送信息，但不能同时发送。这种通信方式是一方发送另一方接收，过一段时间后可以再反过来。</li>
<li><strong>双向同时通信</strong> 　又称为<strong>全双工通信</strong>，通信的双方可以同时发送和接收信息。</li>
</ol>
</li>
<li>单向通信只需要一条信道，而双向交替通信或双向同时通信则都需要两条信道 (每个方向各一条)。双向同时通信的传输效率最高。</li>
<li>来自信源的信号称为<strong>基带信号</strong>。计算机输出的代表各种文字或图像文件的数据信号就属于基带信号。基带信号包含有低频成分，甚至有直流成分，许多信道并不能传输这种低频分量或直流分量。为了解决这一问题，就必须对基带信号进行<strong>调制</strong>。</li>
<li>调制可分为两大类。一类是对基带信号的波形进行变换，使它能够与信道特性相适应。变换后的信号仍然是基带信号，这类调制称为<strong>基带调制</strong>。由于这种基带调制是把数字信号转换为另一种形式的数字信号，因此把这种过程称为<strong>编码</strong>。另一类调制需要使用<strong>载波</strong>进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，这样就能够更好地在模拟信道中传输。经过载波调制后的信号称为<strong>带通信号</strong>，使用载波的调制称为<strong>带通调制</strong>。<ol>
<li><strong>常用编码方式</strong><ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230705222731.png"></li>
<li><strong>不归零制</strong> 　正电平代表 1，负电平代表 0。</li>
<li><strong>归零制</strong> 　正脉冲代表 1，负脉冲代表 0。</li>
<li><strong>曼彻斯特编码</strong> 　位周期中心的向上跳变代表 0，位周期中心的向下跳变代表 1。但也可反过来定义。</li>
<li><strong>差分曼彻斯特编码</strong> 　在每一位的中心处始终都有跳变。位开始边界有跳变代表 0，而位开始边界没有跳变代表 1。</li>
<li>从信号波形中可以看出，曼彻斯特编码产生的信号频率比不归零制高。从自同步能力来看，不归零制不能从信号波形本身中提取信号时钟频率 (这叫做没有自同步能力)，而曼彻斯特编码具有自同步能力。</li>
</ul>
</li>
<li><strong>基本的带通调制方法</strong><ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230705222830.png"></li>
<li><strong>调幅</strong> (AM)　载波的振幅随基带数字信号而变化。0 或 1 分别对应于无载波或有载波输出。</li>
<li><strong>调频</strong> (FM)　载波的频率随基带数字信号而变化。0 或 1 分别对应于频率 <em>f<sub>1</sub></em> 或 <em>f<sub>2</sub>。</em></li>
<li><strong>调相</strong> (PM)　载波的初始相位随基带数字信号而变化。0 或 1 分别对应于相位 0 度或 180度。</li>
<li>为了达到更高的信息传输速率，必须采用更复杂的多元制的振幅相位混合调制方法。例如，<strong>正交振幅调制</strong> QAM。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="2-2-3-信道的极限容量"><a href="#2-2-3-信道的极限容量" class="headerlink" title="2.2.3 信道的极限容量"></a>2.2.3 信道的极限容量</h2><ul>
<li>数字通信的优点是：虽然信号在信道上传输时会不可避免地产生失真，但在接收端只要从失真的波形中能够识别出原来的信号，那么这种失真对通信质量就没有影响。例如图 2-4(a) 表示信号通过实际的信道传输后虽然有失真，但在接收端可识别并恢复出原来的码元。图 2-4(b)信号失真严重，在接收端无法识别码元是 1 还是 0。码元传输的速率越高，或信号传输的距离越远，或噪声干扰越大，或传输媒体质量越差，在接收端的波形的失真就越严重。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230705222925.png"></li>
</ol>
</li>
<li>限制码元在信道上的传输速率的因素下两个：<ol>
<li><strong>信道能够通过的频率范围</strong><ul>
<li>信道所能通过的频率范围是有限的，信号中的许多高频分量不能通过信道。像图 2-4 所示的发送信号是一种矩形脉冲信号，包含很丰富的高频分量。如果信号中的高频分量在传输时受到衰减，那么在接收端收到的波形前沿和后沿就变得不那么陡峭了，每一个码元所占的时间界限也不再是很明确的，而是前后都拖了“尾巴”。这样，在接收端收到的信号波形就失去了码元之间的清晰界限。这种现象叫做<strong>码间串扰</strong>。严重的码间串扰使得本来分得很清楚的一串码元变得模糊而无法识别。<strong>在任何信道中，码元传输的速率是有上限的，传输速率超过此上限，就会出现严重的码间串扰的问题，使接收端对码元的识别成为不可能</strong> 。</li>
<li>信道的频带越宽，能够通过的信号高频分量越多，就可以用更高的速率传送码元而不出现码间串扰。</li>
</ul>
</li>
<li><strong>信噪比</strong><ul>
<li>噪声存在于所有的电子设备和通信信道中。由于噪声是随机产生的，它的瞬时值有时会很大，因此噪声会使接收端对码元的识别产生错误 (1 误判为 0 或 0 误判为 1)。噪声的影响是相对的。如果信号相对较强，那么噪声的影响就相对较小。因此，信噪比很重要。所谓信噪比就是信号的平均功率和噪声的平均功率之比，常记为 S&#x2F;N，并用分贝 (dB) 作为度量单位。即：</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230705223051.png"></li>
<li>香农公式指出：<strong>信道的极限信息传输速率</strong> <em>C</em> 是</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230705223107.png"></li>
<li><em>W</em> 为信道的带宽（以 Hz 为单位）；<em>S</em> 为信道内所传信号的平均功率；<em>N</em> 为信道内部的高斯噪声功率。</li>
<li>香农公式表明，<strong>信道的带宽或信道中的信噪比越大，信息的极限传输速率就越高</strong>。香农公式的意义在于：只要信息传输速率低于信道的极限信息传输速率，就一定存在某种办法来实现无差错的传输。</li>
<li>对于频带宽度已确定的信道，如果信噪比不能再提高了，并且码元传输速率也达到了上限值，可以用编码的方法<strong>让每一个码元携带更多比特的信息量</strong>来提高信息的传输速率。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="2-3-物理层下面的传输媒体"><a href="#2-3-物理层下面的传输媒体" class="headerlink" title="2.3 物理层下面的传输媒体"></a>2.3 物理层下面的传输媒体</h1><ul>
<li><strong>传输媒体</strong>也称为传输介质或传输媒介，是数据传输系统中在发送器和接收器之间的物理通路。</li>
<li>传输媒体分为两大类，<strong>导引型传输媒体</strong>和<strong>非导引型传输媒体</strong>。在导引型传输媒体中，电磁波被导引沿着固体媒体 (铜线或光纤) 传播，而非导引型传输媒体是指自由空间，在非导引型传输媒体中电磁波的传输常称为无线传输。图 2-5 是电信领域使用的电磁波的频谱。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230706092821.png"></li>
</ul>
<h2 id="2-3-1-导引型传输媒体"><a href="#2-3-1-导引型传输媒体" class="headerlink" title="2.3.1 导引型传输媒体"></a>2.3.1 导引型传输媒体</h2><ol>
<li><strong>双绞线</strong><ul>
<li>双绞线也称双扭线，把两根互相绝缘的铜导线并排放在一起，然后用规则的方法<strong>绞合</strong>就构成了双绞线。绞合可减少对相邻导线的电磁干扰。几乎所有的电话都用双绞线连接到电话交换机。从用户电话机到交换机的双绞线称为<strong>用户线</strong>或<strong>用户环路</strong>。</li>
<li>模拟传输和数字传输可以使用双绞线，通信距离一般为几到十几公里。距离太长时就要加放大器将衰减的信号放大到合适的数值 (对于模拟传输)，或者加上中继器对失真的数字信号进行整形 (对于数字传输)。导线越粗，其通信距离就越远，价格也越高。在数字传输时，若传输速率为每秒几个兆比特，则传输距离可达几公里。由于双绞线的价格便宜且性能也不错，因此使用十分广泛。</li>
<li>为了提高双绞线抗电磁干扰的能力，可在双绞线的外面加上一层用金属丝编织成的屏蔽层。这就是<strong>屏蔽双绞线</strong>，简称为 STP。它的价格比<strong>无屏蔽双绞线</strong> UTP 要高。图 2-6 是无屏蔽双绞线和屏蔽双绞线的示意图。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230706095419.png"></li>
</ol>
</li>
</ul>
</li>
<li><strong>同轴电缆</strong><ul>
<li>同轴电缆由内导体铜质芯线、绝缘层、网状编织的外导体屏蔽层以及保护塑料外层所组成 (图2-7)。由于外导体屏蔽层的作用，同轴电缆具有很好的抗干扰特性，被广泛用于传输较高速率的数据。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230706095526.png"></li>
</ol>
</li>
</ul>
</li>
<li><strong>光缆</strong><ul>
<li>光纤通信就是利用光导纤维传递光脉冲来进行通信。有光脉冲相当于 1，没有光脉冲相当于 0。由于可见光的频率非常高，约为10<sup>8</sup> MHz 的量级，因此一个光纤通信系统的传输带宽大于目前其他各种传输媒体的带宽。</li>
<li>光纤是光纤通信的传输媒体。在发送端有光源，可以采用发光二极管或半导体激光器，它们在电脉冲的作用下能产生出光脉冲。在接收端利用光电二极管做成光检测器，在检测到光脉冲时可还原出电脉冲。</li>
<li>光纤不仅具有通信容量大的优点，而且还有其他特点：<ol>
<li>传输损耗小，中继距离长，远距离传输特别经济。</li>
<li>抗雷电和电磁干扰性能好。这在有大电流脉冲干扰的环境下尤为重要。</li>
<li>无串音干扰，保密性好，也不易被窃听或截取数据。</li>
<li>体积小，重量轻。这在电缆管道拥塞不堪的情况下特别有利。</li>
</ol>
</li>
</ul>
</li>
</ol>
<h2 id="2-3-2-非导引型传输媒体"><a href="#2-3-2-非导引型传输媒体" class="headerlink" title="2.3.2 非导引型传输媒体"></a>2.3.2 非导引型传输媒体</h2><ol>
<li>短波通信 (高频通信) 靠电离层的反射。电离层的不稳定所产生的衰落现象和电离层反射所产生的多径效应，使得短波信道的通信质量较差。当必须使用短波无线电台传送数据时，一般是低速传输，即速率为一个标准模拟话路传几十至几百比特&#x2F;秒</li>
<li>无线电微波通信在数据通信中占有重要地位。微波在空间是直线传播。由于微波会穿透电离层进入宇宙空间，因此它不像短波那样可以经电离层反射传播到地面上很远的地方。传统的微波通信有两种，即<strong>地面微波接力通信</strong>和<strong>卫星通信</strong>。<ol>
<li>微波接力通信可传输电话、电报、图像、数据等信息。<ul>
<li>特点：<ol>
<li>微波波段频率高，频段范围宽，通信信道的容量大。</li>
<li>工业干扰和天电干扰的频谱成分比微波频率低得多，对微波通信的危害比对短波和米波 (即甚高频) 通信小，因而微波传输质量高。</li>
<li>与相同容量和长度的电缆载波通信比较，微波接力通信建设投资少，见效快，易于跨越山区、江河。</li>
</ol>
</li>
<li>缺点：<ol>
<li>相邻站之间必须直视 (常称为视距 LOS)，不能有障碍物。有时一个天线发射出的信号会分成几条略有差别的路径到达接收天线，因而造成失真。</li>
<li>微波的传播会受恶劣气候的影响。</li>
<li>与电缆通信系统比较，微波通信的隐蔽性和保密性差。</li>
<li>中继站的使用和维护要耗费较多的人力和物力。</li>
</ol>
</li>
</ul>
</li>
<li>卫星通信的特点是通信距离远，且通信费用与通信距离无关。<ul>
<li>和微波接力通信相似，卫星通信的频带宽，通信容量大，信号受到的干扰小，通信稳定。</li>
<li>卫星通信的另一特点是有<strong>较大的传播时延</strong> 。</li>
<li>“卫星信道的传播时延较大”不等于“用卫星信道传送数据的时延较大”。因为传送数据的总时延除了传播时延外，还有发送时延、处理时延和排队时延等。传播时延在总时延中所占的比例有多大，取决于具体情况。但利用卫星信道进行交互式的网上游戏显然是不合适的。</li>
<li>卫星通信适合于广播通信，因为它的覆盖面很广。从安全方面考虑，卫星通信系统的保密性则相对较差。</li>
<li>卫星通信的费用较高。</li>
</ul>
</li>
</ol>
</li>
</ol>
<h1 id="2-4-信道复用技术"><a href="#2-4-信道复用技术" class="headerlink" title="2.4 信道复用技术"></a>2.4 信道复用技术</h1><h2 id="2-4-1-频分复用、时分复用和统计时分复用"><a href="#2-4-1-频分复用、时分复用和统计时分复用" class="headerlink" title="2.4.1 频分复用、时分复用和统计时分复用"></a>2.4.1 频分复用、时分复用和统计时分复用</h2><ul>
<li>图 2-13(a) 表示 A<sub>1</sub>，B<sub>1</sub> 和 C<sub>1</sub> 分别使用一个单独的信道进行通信，总共需要三个信道。如果在发送端使用一个复用器，它们可以合起来使用一个共享信道进行通信。在接收端使用分用器，把合起来传输的信息分别送到相应的终点。图 2-13(b) 是复用的示意图。复用要付出代价。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230707095902.png"></li>
</ol>
</li>
<li>最基本的复用就是<strong>频分复用</strong> (FDM) 和<strong>时分复用</strong> (TDM)。<ol>
<li><strong>频分复用</strong><ul>
<li>频分复用最简单，其特点如图 2-14(a) 所示。用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。<strong>频分复用的所有用户在同样的时间占用不同的带宽资源</strong>。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230707100801.png"></li>
<li>使用频分复用时，若每一个用户占用的带宽不变，则当复用的用户数增加时，复用后的信道的总带宽就跟着变宽。</li>
</ul>
</li>
<li><strong>时分复用</strong><ul>
<li>时分复用是将时间划分为一段段等长的时分复用帧 (TDM 帧)。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。在图 2-14(b) 中画出了 4 个用户 A，B，C 和 D。每一个用户所占用的时隙周期性地出现 (周期是 TDM 帧的长度）。因此 TDM 信号也称<strong>等时</strong>信号。<strong>时分复用的所有用户是在不同的时间占用同样的频带宽度</strong>。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230707100841.png"></li>
<li>使用时分复用时，每一个时分复用帧的长度是不变的，始终是 125µs。若有 1000 个用户进行时分复用，则每一个用户分配到的时隙宽度就是 125µs 的千分之一，即 0.125µs，时隙宽度变得非常窄。</li>
</ul>
</li>
<li>这两种复用方法的优点是技术成熟，缺点是不灵活。时分复用则更有利于数字信号的传输。</li>
</ol>
</li>
<li>在进行通信时，<strong>复用器</strong>总和<strong>分用器</strong>成对地使用。在复用器和分用器之间是用户共享的高速信道。分用器的作用和复用器相反，把高速信道传送过来的数据进行分用，分别送交到相应的用户。</li>
</ul>
<h2 id="2-4-2-波分复用"><a href="#2-4-2-波分复用" class="headerlink" title="2.4.2 波分复用"></a>2.4.2 波分复用</h2><ul>
<li><strong>波分复用</strong> (WDM) 就是<strong>光的频分复用</strong>。</li>
<li><strong>光复用器</strong>：波分复用的复用器又称为<strong>合波器</strong>。</li>
<li><strong>光分用器</strong>：波分复用的分用器又称为<strong>分波器</strong>。</li>
<li>光信号传输了一段距离后会衰减，对衰减了的光信号进行放大才能继续传输。</li>
<li><strong>掺铒光纤放大器</strong> (EDFA)。不需要进行光电转换直接对光信号进行放大。</li>
</ul>
<h2 id="2-4-3-码分复用"><a href="#2-4-3-码分复用" class="headerlink" title="2.4.3 码分复用"></a>2.4.3 码分复用</h2><ul>
<li><strong>码分复用</strong> (CDM) 是一种共享信道的方法。也叫作<strong>码分多址</strong> (CDMA)。每个用户可在同样的时间使用同样的频带进行通信。由于<strong>各用户使用经过特殊挑选的不同码型，因此各用户之间不会造成干扰</strong>。码分复用发送的信号有很强的抗干扰能力，<strong>其频谱类似于白噪声，不易被发现</strong>。采用 CDMA 可提高通信的话音质量和数据传输的可靠性，减少干扰对通信的影响，增大通信系统的容量，降低手机的平均发射功率。</li>
<li>在 CDMA 中，每个比特时间划分为 m 个短的间隔，称为<strong>码片</strong>。</li>
<li>使用 CDMA 的每个站被指派一个唯一的 m bit <strong>码片序列</strong>。一个站如果要发送比特 1，则发送它自己的 m bit 码片序列。如果要发送比特 0，则发送该码片序列的二进制反码。<ol>
<li>例如指派给 S 站的 8 bit 码片序列是 0001 1011。当 S 发送比特 1 时，它就发送序列 0001 1011，而当 S 发送比特 0 时，就发送 1110 0100。将码片中的 0 写为 – 1，将 1 写为＋1。因此 S 站的码片序列是 (–1 –1 –1＋1＋1 –1＋1＋1)。</li>
</ol>
</li>
<li>假定 S 站要发送信息的数据率为 b bit&#x2F;s。由于每一个比特要转换成 m 个比特的码片，因此 S 站实际上发送的数据率提高到 mb bit&#x2F;s，S 站所占用的频带宽度也提高到原来数值的 m 倍。这种通信方式是<strong>扩频</strong>通信中的一种。扩频通信有两类。<ol>
<li>一种是<strong>直接序列扩频</strong> (DSSS)，如码片序列。</li>
<li>另一种是<strong>跳频扩频</strong> (FHSS)。</li>
</ol>
</li>
<li>CDMA 系统的特点是这种体制给每个站分配的码片序列不仅必须各不相同，还必须互相<strong>正交</strong>。在实用的系统中使用<strong>伪随机码序列</strong>。</li>
<li>数学公式可清楚地表示码片序列的正交关系。令向量 <em><strong>S</strong></em> 表示站 S 的码片向量，再令 <em><strong>T</strong></em> 表示其他任何站的码片向量。两个不同站的码片序列正交，就是向量 <em><strong>S</strong></em> 和 <em><strong>T</strong></em> 的规格化<strong>内积</strong>都是 0：<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230709160115.png"></li>
</ol>
</li>
<li>向量 <em><strong>S</strong></em> 为 (–1 –1 –1＋1＋1 –1＋1＋1)，同时设向量 <em><strong>T</strong></em> 为 (–1 –1＋1 –1＋1＋1＋1 –1)，相当于 T 站的码片序列为 00101110。将向量 <em><strong>S</strong></em> 和 <em><strong>T</strong></em> 的各分量值代入 (2-3) 式就可看出这两个码片序列是正交的。向量 <em><strong>S</strong></em> 和各站码片反码的向量的内积也是 0。任何一个码片向量和该码片向量自己的规格化内积都是 1。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230709160135.png"></li>
</ol>
</li>
</ul>
<h1 id="2-5-数字传输系统"><a href="#2-5-数字传输系统" class="headerlink" title="2.5 数字传输系统"></a>2.5 数字传输系统</h1><ul>
<li>早期的数字传输系统存在许多缺点，主要是以下两个：<ol>
<li><strong>速率标准不统一</strong>。多路复用的速率体系有两个互不兼容的国际标准，北美和日本的 T<sub>1</sub> 速率(1.544Mbit&#x2F;s) 和欧洲的 E<sub>1</sub> 速率 (2.048Mbit&#x2F;s)。</li>
<li><strong>不是同步传输</strong>。为了节约经费，各国的数字网主要采用<strong>准同步</strong>方式。在准同步系统中由于各支路信号的时钟频率有偏差，给时分复用和分用带来许多麻烦。当数据传输的速率很高时，收发双方的时钟同步就成大问题。</li>
</ol>
</li>
</ul>
<h1 id="2-6-宽带接入技术"><a href="#2-6-宽带接入技术" class="headerlink" title="2.6 宽带接入技术"></a>2.6 宽带接入技术</h1><h2 id="2-6-1-ADSL-技术"><a href="#2-6-1-ADSL-技术" class="headerlink" title="2.6.1 ADSL 技术"></a>2.6.1 ADSL 技术</h2><ul>
<li><strong>非对称数字用户线</strong> (ADSL) 技术是<strong>用数字技术对现有的模拟电话用户线进行改造</strong>，使它能承载宽带数字业务。    </li>
<li>ADSL 的传输距离取决于数据率和用户线的线径。ADSL 能得到的最高数据传输速率与实际的用户线上的信噪比密切相关。<ol>
<li>用户线越细，信号传输时的衰减就越大。</li>
<li>传输速率越快，信号传输时的衰减就越大。</li>
</ol>
</li>
<li>基于ADSL 的接入网由三部分组成：<strong>数字用户线接入复用器</strong> DSLAM、用户线和用户家中的设施 (见图 2-20)。数字用户线接入复用器包括 ADSL 调制解调器。ADSL 调制解调器又称<strong>接入端接单元</strong> ATU。ADSL 调制解调器必须成对使用，因此把在电话端局 (或远端站) 和用户家中所用的 ADSL 调制解调器分别记为 ATU-C (C 代表<strong>端局</strong>) 和 ATU-R (R 代表<strong>远端</strong>)。用户电话通过电话<strong>分离器</strong>和 ATU-R 连在一起，经用户线到端局，并再经过电话分离器把电话连到本地电话交换机。电话分离器是无源的，它利用低通滤波器将电话信号与数字信号分开。将电话分离器做成无源的是为了在停电时不影响传统电话的使用。一个 DSLAM 可支持多达 500～1000 个用户。若按每户 6Mbit&#x2F;s 计算，则具有 1000 个端口的 DSLAM (这就需要用 1000 个 ATU-C) 应有高达 6Gbit&#x2F;s 的转发能力。ATU-C 要使用数字信号处理技术，因此 DSLAM 的价格较高。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230710170833.png"></li>
</ol>
</li>
<li>第二代 ADSL 改进的地方是：<ol>
<li>提高调制效率得到更高的数据率。</li>
<li>采用<strong>无缝速率自适应</strong>技术 (SRA)，可在运营中不中断通信和不产生误码的情况下，根据线路的实时状况，自适应地调整数据率。</li>
<li>改善线路质量评测和故障定位功能，对提高网络的运行维护水平具有重要意义。</li>
</ol>
</li>
</ul>
<h2 id="2-6-2-光纤同轴混合网-HFC-网"><a href="#2-6-2-光纤同轴混合网-HFC-网" class="headerlink" title="2.6.2 光纤同轴混合网 (HFC 网)"></a>2.6.2 光纤同轴混合网 (HFC 网)</h2><ul>
<li><strong>光纤同轴混合网</strong> (HFC 网) 是在目前覆盖面很广的有线电视网的基础上开发的一种居民宽带接入网，除可传送电视节目外，还提供电话、数据和其他宽带交互型业务。</li>
<li>光纤同轴混合网 HFC 的特点：<ol>
<li>为提高传输的可靠性和电视信号的质量，HFC 网把原有线电视网中的同轴电缆主干部分改换为光纤 (图 2-23)。光纤从头端连接到<strong>光纤结点</strong>。在光纤结点光信号转换为电信号，然后通过同轴电缆传送到用户家庭。从头端到用户家庭所需的放大器数目减少到 4～5 个。连接到一个光纤结点的典型用户数是 500 左右，不超过 2000。</li>
<li>HFC 网具有双向传输功能，扩展了传输频带。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230710172306.png"></li>
</ol>
</li>
<li>使模拟电视机能接收数字电视信号，需要把<strong>机顶盒</strong>连接在同轴电缆和用户的电视机之间。为了使用户能够利用 HFC 网接入到互联网，以及在上行信道中传送交互数字电视所需的一些信息，还需要增加一个为 HFC 网使用的调制解调器，它又称为<strong>电缆调制解调器</strong>。</li>
</ul>
<h2 id="2-6-3-FTTx-技术"><a href="#2-6-3-FTTx-技术" class="headerlink" title="2.6.3 FTTx 技术"></a>2.6.3 FTTx 技术</h2><ul>
<li>为了更快地下载视频文件，更流畅地欣赏网上的高清视频节目，尽快地把用户的上网速率进行升级就成为 ISP 的重要任务，<strong>光纤到户</strong> (FTTH) 是最好的选择。</li>
<li>光纤到户 FTTH 有两个问题：<ol>
<li>价格不便宜</li>
<li>一般的家庭用户不需要过高的数据率的需求</li>
</ol>
</li>
<li>为了有效地利用光纤资源，在光纤干线和用户间，需要铺设一段中间的转换装置<strong>光配线网</strong> (ODN)，使数十个家庭用户能够共享一根光纤干线。</li>
<li>图 2-25 是广泛使用的无源光配线网的示意图。“无源”表明在光配线网中无须配备电源，基本上不用维护，其长期运营成本和管理成本很低。无源的光配线网常称为<strong>无源光网络</strong> (PON)。<ol>
<li><img src="https://raw.githubusercontent.com/chipfron/Image_/main/computer_network%7B419185F1-78FE-4077-9766-E3333D89BF52%7D.png"></li>
<li>在图 2-25 中，<strong>光线路终端</strong> OLT 是连接到光纤干线的终端设备。OLT 把收到的下行数据发往无源的 1：N <strong>光分路器</strong>，然后用广播方式向所有用户端的<strong>光网络单元</strong> ONU发送。</li>
<li>当 ONU 发送上行数据时，先把电信号转换为光信号，光分路器把各 ONU 发来的上行数据汇总后，以 TDMA 方式发往 OLT，而发送时间和长度都由 OLT 集中控制，以便有序地共享光纤主干。</li>
<li>无源光网络 PON 的种类很多，流行的有以下两种：<ul>
<li>以太网无源光网络 (EPON)，在链路层使用以太网协议，利用 PON 的拓扑结构实现了以太网的接入。EPON 的优点是：与现有以太网的兼容性好，并且成本低，扩展性强，管理方便。</li>
<li>吉比特无源光网络 (GPON)，GPON 采用<strong>通用封装方法</strong> (GEM)，可承载多业务，对各种业务类型都能够提供服务质量保证，是很有潜力的宽带光纤接入技术。</li>
</ul>
</li>
</ol>
</li>
<li>现在已有很多种不同的 FTTx。除了光纤到户 FTTH 外，还有<strong>光纤到路边</strong> FTTC (C 表示 Curb)、<strong>光纤到小区</strong> FTTZ (Z 表示 Zone)、<strong>光纤到大楼</strong> FTTB (B 表示 Building)、<strong>光纤到楼层</strong> FTTF (F 表示Floor)、<strong>光纤到办公室</strong> FTTO (O 表示 Office)、<strong>光纤到桌面</strong> FTTD (D 表示 Desk)，等等。</li>
</ul>
<h1 id="本章的重要概念-1"><a href="#本章的重要概念-1" class="headerlink" title="本章的重要概念"></a>本章的重要概念</h1><ul>
<li>物理层的任务是确定与传输媒体的接口有关的一些特性，如机械特性、电气特性、功能特性和过程特性。</li>
<li>一个数据通信系统可划分为三部分，即源系统、传输系统和目的系统。源系统包括源点 (或源站、信源) 和发送器，目的系统包括接收器和终点 (或目的站，或信宿)。</li>
<li>通信的目的是传送消息。如话音、文字、图像、视频等。数据是运送消息的实体。信号则是数据的电气或电磁的表现。</li>
<li>根据信号中代表消息的参数的取值方式不同，信号可分为模拟信号 (连续信号) 和数字信号 (离散信号)。代表数字信号不同离散数值的基本波形称为码元。</li>
<li>根据双方信息交互的方式，通信划分为单向通信 (单工通信)、双向交替通信 (半双工通信) 和双向同时通信 (全双工通信)。</li>
<li>来自信源的信号叫基带信号。信号要在信道上传输就要经过调制。调制有基带调制和带通调制之分。最基本的带通调制方法有调幅、调频和调相。还有更复杂的调制方法，如正交振幅调制。</li>
<li>要提高数据在信道上的传输速率，可以使用更好的传输媒体，或使用先进的调制技术。但数据传输速率不可能被任意地提高。</li>
<li>传输媒体分为两类，即导引型传输媒体 (双绞线、同轴电缆或光纤) 和非导引型传输媒体 (无线或红外或大气激光)。</li>
<li>常用的信道复用技术有频分复用、时分复用、统计时分复用、码分复用和波分复用 (光的频分复用)。</li>
<li>最初在数字传输系统中使用的传输标准是脉冲编码调制 PCM。现在高速的数字传输系统使用同步光纤网 SONET (美国标准) 或同步数字系列 SDH (国际标准)。</li>
<li>用户到互联网的宽带接入方法有非对称数字用户线 ADSL (用数字技术对现有的模拟电话用户线进行改造)、光纤同轴混合网 HFC (在有线电视网的基础上开发的) 和 FTTx。</li>
<li>为了有效地利用光纤资源，在光纤干线和用户之间广泛使用无源光网络 PON。无源光网络无须配备电源，其长期运营成本和管理成本都很低。最流行的无源光网络是以太网无源光网络 EPON 和吉比特无源光网络 GPON。</li>
</ul>
<h1 id="3-1-使用点对点信道的数据链路层"><a href="#3-1-使用点对点信道的数据链路层" class="headerlink" title="3.1 使用点对点信道的数据链路层"></a>3.1 使用点对点信道的数据链路层</h1><ul>
<li>数据链路层属于计算机网络的低层。数据链路层使用的信道有以下两种类型：<ol>
<li><strong>点对点信道</strong>。使用一对一的点对点通信方式。</li>
<li><strong>广播信道</strong>。使用一对多的广播通信方式，过程复杂。广播信道上连接的主机很多，必须使用专用的共享信道协议来协调这些主机的数据发送。</li>
</ol>
</li>
<li>本章重要的内容：<ol>
<li>数据链路层的点对点信道和广播信道的特点，以及这两种信道所使用的协议 (PPP 协议以及 CSMA&#x2F;CD 协议) 的特点。</li>
<li>数据链路层的三个基本问题：封装成帧、透明传输和差错检测。</li>
<li>以太网 MAC 层的硬件地址。</li>
<li>适配器、转发器、集线器、网桥、以太网交换机的作用以及使用场合。</li>
</ol>
</li>
</ul>
<h2 id="3-1-1-数据链路和帧"><a href="#3-1-1-数据链路和帧" class="headerlink" title="3.1.1 数据链路和帧"></a>3.1.1 数据链路和帧</h2><ul>
<li><strong>链路</strong>是从一个结点<strong>到相邻结点</strong>的一段物理线路，中间没有其他的交换结点。在进行数据通信时，两台计算机之间的通信路径要经过许多段链路。链路只是一条路径的组成部分。</li>
<li>当需要在一条线路上传送数据时，除了必须有一条物理线路外，还必须有一些通信协议控制数据的传输。把实现这些协议的硬件和软件加到链路上，构成了数据链路。常用的方法是使用<strong>网络适配器</strong>来实现协议。一般适配器都包括了数据链路层和物理层这两层的功能。</li>
<li>数据链路层把网络层交下来的数据构成<strong>帧</strong>发送到链路上，把接收到的帧中的数据取出并上交给网络层。在互联网中，网络层协议数据单元就是 IP 数据报 (或简称为<strong>数据报、分组</strong>或<strong>包</strong>)。</li>
<li>点对点信道的数据链路层在进行通信时的主要步骤如下：<ol>
<li>结点 A 的数据链路层把网络层交下来的 IP 数据报添加首部和尾部封装成帧。</li>
<li>结点 A 把封装好的帧发送给结点 B 的数据链路层。</li>
<li>若结点 B 的数据链路层收到的帧无差错，则从收到的帧中提取出 IP 数据报交给上面的网络层；否则丢弃这个帧。</li>
</ol>
</li>
<li><img src="https://raw.githubusercontent.com/chipfron/Image_/main/computer_network%7BB2EB60AE-6404-40b9-9EEA-BE05ACDFE73D%7D.png"></li>
</ul>
<h2 id="3-1-2-三个基本问腿"><a href="#3-1-2-三个基本问腿" class="headerlink" title="3.1.2 三个基本问腿"></a>3.1.2 三个基本问腿</h2><ul>
<li>数据链路层协议有多种，但有三个基本问题是共同的：<strong>封装成帧、透明传输和差错检测</strong>：<ol>
<li><strong>封装成帧</strong><ul>
<li><strong>封装成帧</strong>是在一段数据的前后添加首部和尾部，构成了一个帧。</li>
<li>帧长等于帧的数据部分长度加上帧首部和帧尾部的长度。</li>
<li>首部和尾部的作用是进行<strong>帧定界</strong> (即确定帧的界限)。首部和尾部还包括许多控制信息。</li>
<li>为了提高帧的传输效率，应当使帧的<strong>数据部分长度尽可能地大于首部和尾部的长度。但是，每一种链路层协议都规定了所能传送的帧的数据部分长度上限——最大传送单元</strong>(MTU)。</li>
<li><img src="https://raw.githubusercontent.com/chipfron/Image_/main/computer_networkSnipaste_2023-11-20_16-00-59.png"></li>
</ul>
</li>
<li><strong>透明传输</strong><ul>
<li>由于帧的开始和结束的标记使用指明的控制字符，因此，所传输的数据中任何 8 比特的组合不允许和用作帧定界的控制字符的比特编码一样，否则会出现帧定界的错误。</li>
<li>当传送的帧是用文本文件组成的帧时 (文本文件中的字符都是从键盘上输入的)，其数据部分不会出现像 SOH 或 EOT 这样的帧定界控制字符。不管从键盘上输入什么字符都可以放在这样的帧中传输过去，这样的传输就是透明传输。</li>
<li>当数据部分是非 ASCII 码的文本文件时 (如二进制代码的计算机程序或图像等)。如果数据中的某个字节的二进制代码和 SOH 或 EOT 这种控制字符一样 (见图 3-6)，数据链路层会<strong>错误地</strong>找到帧的边界，把部分帧收下，而把剩下的那部分数据丢弃。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230711095956.png"></li>
</ol>
</li>
<li>解决透明传输问题，必须使<strong>数据中</strong>可能出现的控制字符 SOH 和 EOT 在接收端不被解释为控制字符。方法是：发送端的数据链路层在数据中出现控制字符的前面插入一个<strong>转义字符</strong> ESC。在接收端的数据链路层，在把数据送往网络层之前删除插入的转义字符。这被称为<strong>字节填充</strong>或<strong>字符填充</strong>。如果转义字符也出现在数据当中，那么解决方法仍然是在转义字符的前面插入一个转义字符。因此，当接收端收到连续的两个转义字符时，就删除其中前面的一个。图 3-7 表示用字节填充法解决透明传输的问题。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230711100111.png"></li>
</ol>
</li>
</ul>
</li>
<li><strong>差错检测</strong><ul>
<li>现实的通信链路不是理想的。比特在传输过程中可能会产生差错：1 可能变成 0，而 0 可能变成 1。这就叫做<strong>比特差错</strong>。比特差错是传输差错中的一种。</li>
<li>一段时间内，传输错误的比特占所传输比特总数的比率称为<strong>误码率</strong> (BER)。</li>
<li>为保证数据传输的可靠性，在数据链路层广泛使用<strong>循环冗余检验</strong> (CRC) 的检错技术。</li>
<li>通过例子说明循环冗余检验的原理。<ol>
<li>在发送端，把数据划分为组，假定每组 <em>k</em> 个比特。待传送的数据 <em>M</em>＝101001 (<em>k</em>＝6)。CRC 运算就是在数据 <em>M</em> 的后面添加供差错检测用的 <em>n</em> 位<strong>冗余码</strong>，构成一个帧发送出去，一共发送 (<em>k</em> ＋ <em>n</em>) 位。在所要发送的数据后面增加 <em>n</em> 位的冗余码，虽然增大了数据传输的开销，但可以进行差错检测。</li>
<li>这 <em>n</em> 位冗余码可用以下方法得出。用二进制的<strong>模 2 运算</strong>进行 2<sup>n</sup> 乘 <em>M</em> 的运算，这相当于在 <em>M</em> 后面添加 <em>n</em> 个 0。得到的 (<em>k</em>＋<em>n</em>) 位的数除以收发双方事先商定的长度为 (<em>n</em>＋1) 位的除数 <em>P</em>，得出商是 <em>Q</em> 而余数是 <em>R</em> (<em>n</em> 位，比 <em>P</em> 少一位)。在图 3-8 所示的例子中，<em>M</em>＝101001 (即 <em>k</em>＝6)。假定除数 <em>P</em>＝1101 (即 <em>n</em>＝3)。经模 2 除法运算后的结果是：商 <em>Q</em>＝110101 (这个商并没有什么用处)，余数 <em>R</em>＝001。余数 <em>R</em> 作为冗余码拼接在数据 <em>M</em> 的后面发送出去。这种为了进行检错而添加的冗余码常称为<strong>帧检验序列</strong> (FCS)。因此加上 FCS 后发送的帧是 101001001，共有 (<em>k</em>＋<em>n</em>) 位。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230711102631.png"></li>
</ol>
</li>
<li>循环冗余检验 CRC 和帧检验序列 FCS 并不是同一个概念。CRC 是一种<strong>检错方法</strong>，而 FCS 是添加在数据后面的<strong>冗余码</strong>，在检错方法上可选用 CRC，也可不选用 CRC。</li>
<li>在接收端对收到的每一帧经过 CRC 检验后，有两种情况：<ol>
<li>得出的余数 <em>R</em>＝0，判定这个帧没有差错，接受。</li>
<li>余数 <em>R</em>≠0，这个帧有差错 (但无法确定究竟是哪一位或哪几位出现了差错)，丢弃。</li>
</ol>
</li>
<li>用多项式来表示循环冗余检验过程。用多项式 <em>P</em>(<em>X</em>) ＝<em>X</em><sup>3</sup> ＋<em>X</em><sup>2</sup>＋1表示上面的除数 <em>P</em>＝1101 (最高位对应于 <em>X</em><sup>3</sup>，最低位对应于 <em>X</em><sup>0</sup>)。多项式 <em>P</em>(<em>X</em>) 称为<strong>生成多项式</strong>。现在广泛使用的生成多项式 <em>P</em>(<em>X</em>) 有以下几种：<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230711104339.png"></li>
</ol>
</li>
<li>在数据链路层，发送端帧检验序列 FCS 的生成和接收端的 CRC 检验都是用硬件完成的，处理很迅速，不会延误数据的传输。</li>
<li>在数据链路层若<strong>仅仅</strong>使用循环冗余检验 CRC 差错检测技术，只能做到对帧的<strong>无差错接受</strong>，即：“<strong>凡是接收端数据链路层接受的帧均无差错</strong>”。</li>
<li>传输差错分为两大类：<ol>
<li>最基本的比特差错</li>
<li>收到的帧并没有出现比特差错，却出现了<strong>帧丢失、帧重复</strong>或<strong>帧失序</strong>。例如，发送方连续传送三个帧：1，2，3。假定接收端收到的每一个帧都没有比特差错，但却出现下面的几种情况：<ul>
<li><strong>帧丢失</strong> ：收到 1，3 (丢失 2)。</li>
<li><strong>帧重复</strong> ：收到1，2，2，3 (收到两个2)。</li>
<li><strong>帧失序</strong> ：收到1，3，2 (后发送的帧反而先到达了接收端，这与一般数据链路层的传输概念不一样)。</li>
</ul>
</li>
</ol>
</li>
<li>现在的通信线路的质量大大提高，由通信链路质量不好引起差错的概率大大降低。现在互联网采取了区别对待的方法：<ol>
<li>对于通信质量良好的有线传输链路，数据链路层协议不使用确认和重传机制，不要求数据链路层向上提供可靠传输的服务。如果在数据链路层传输数据时出现了差错并且需要进行改正，那么改正差错的任务就由上层协议来完成。</li>
<li>对于通信质量较差的无线传输链路，数据链路层协议使用确认和重传机制，数据链路层向上提供可靠传输的服务。</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="3-2-点对点协议-PPP"><a href="#3-2-点对点协议-PPP" class="headerlink" title="3.2 点对点协议 PPP"></a>3.2 点对点协议 PPP</h1><ul>
<li>在通信线路质量较差的年代，使用可靠传输协议是种好办法，能实现可靠传输的<strong>高级数据链路控制</strong> (HDLC) 成为流行的数据链路层协议。对于点对点的链路，简单的<strong>点对点协议</strong> (PPP) 是目前使用得最广泛的数据链路层协议。</li>
</ul>
<h2 id="3-2-1-PPP-协议的特点"><a href="#3-2-1-PPP-协议的特点" class="headerlink" title="3.2.1 PPP 协议的特点"></a>3.2.1 PPP 协议的特点</h2><ul>
<li>PPP 协议是用户计算机和 ISP 进行通信时使用的数据链路层协议。</li>
<li><strong>PPP 协议应满足的需求</strong><ol>
<li><strong>简单</strong> 　在设计互联网体系结构时复杂的部分在 TCP 协议中，而网际协议 IP 比较简单，它提供的是不可靠的数据报服务。在这种情况下，数据链路层没有必要提供比 IP 协议更多的功能。因此，对数据链路层的帧，不需要纠错，不需要序号，也不需要流量控制。</li>
<li><strong>封装成帧</strong> 　PPP 协议规定特殊的字符作为<strong>帧定界符</strong>，以便使接收端从收到的比特流中能准确地找出帧的开始和结束位置。</li>
<li><strong>透明性</strong> 　PPP 协议保证数据传输的透明性。如果数据中碰巧出现了和帧定界符一样的比特组合时，要采取有效的措施来解决问题。</li>
<li><strong>多种网络层协议</strong> 　PPP 协议能够在<strong>在同一条物理链路上同时支持多种网络层协议</strong> (如 IP 和 IPX 等) 的运行。当点对点链路所连接的是局域网或路由器时，PPP 协议必须同时支持在链路所连接的局域网或路由器上运行的各种网络层协议。</li>
<li><strong>多种类型链路</strong> 　除了要支持多种网络层的协议外，PPP 还必须能够在多种类型的链路上运行。</li>
<li><strong>差错检测</strong> 　PPP 协议必须能够对接收端收到的帧进行检测，并<strong>立即丢弃有差错的帧</strong>。若在数据链路层不进行差错检测，那么出现差错的无用帧还要在网络中继续向前转发，白白浪费许多的网络资源。</li>
<li><strong>检测连接状态</strong> 　PPP 协议必须具有一种能够及时自动检测出链路是否处于正常工作状态的机制。当出现故障的链路隔了一段时间后又重新恢复正常工作时，就需要这种及时检测功能。</li>
<li><strong>最大传送单元</strong> 　PPP 协议必须对每种类型的点对点链路设置<strong>最大传送单元</strong> MTU 的标准默认值，目的是为了促进各种实现之间的互操作性。如果高层协议发送的分组过长并超过 MTU 的数值，PPP 就要丢弃这样的帧，并返回差错。MTU 是数据链路层的帧可以载荷的<strong>数据部分</strong>的最大长度，<strong>不是帧的总长度</strong>。</li>
<li><strong>网络层地址协商</strong> 　PPP 协议必须提供一种机制使通信的两个网络层的实体能够通过协商知道或能够配置彼此的网络层地址。协商的算法应尽可能简单，并且能够在所有的情况下得出协商结果。</li>
<li><strong>数据压缩协商</strong> 　PPP 协议必须提供一种方法来协商使用数据压缩算法。但 PPP 协议并不要求将数据压缩算法进行标准化。</li>
</ol>
</li>
<li><strong>PPP 协议的组成</strong><ol>
<li>一个将 IP 数据报封装到串行链路的方法。PPP 既支持异步链路，也支持面向比特的同步链路。IP 数据报在 PPP 帧中就是其信息部分。这个信息部分的长度受最大传送单元 MTU 的限制。</li>
<li>一个用来建立、配置和测试数据链路连接的<strong>链路控制协议</strong> (LCP)。</li>
<li>一套<strong>网络控制协议</strong> (NCP)，其中的每一个协议支持不同的网络层协议。</li>
</ol>
</li>
</ul>
<h2 id="3-2-2-PPP-协议的帧格式"><a href="#3-2-2-PPP-协议的帧格式" class="headerlink" title="3.2.2 PPP 协议的帧格式"></a>3.2.2 PPP 协议的帧格式</h2><ul>
<li><strong>各字段的意义</strong><ol>
<li>PPP 的帧格式如图 3-10 所示。PPP 帧的首部和尾部分别为四个字段和两个字段。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230714175950.png"></li>
<li>首部的第一个字段和尾部的第二个字段都是标志字段 F (Flag)，规定为 0x7E (符号“0x”表示它后面的字符是用十六进制表示的。十六进制的 7E 的二进制表示是 01111110)。标志字段表示一个帧的开始或结束。因此标志字段就是 PPP 帧的定界符。连续两帧之间只需要用一个标志字段。如果出现连续两个标志字段，就表示这是一个空帧，应当丢弃；首部中的地址字段 A 规定为 0xFF (即 11111111)，控制字段 C 规定为 0x03 (即 00000011)。这两个字段并没有携带 PPP 帧的信息；PPP 首部的第四个字段是 2 字节的协议字段。当协议字段为 0x0021 时，PPP 帧的信息字段就是 IP 数据报。若为 0xC021，则信息字段是 PPP 链路控制协议 LCP 的数据，而 0x8021 表示这是网络层的控制数据；信息字段的长度是可变的，不超过 1500 字节；尾部中的第一个字段 (2 字节) 是使用 CRC 的帧检验序列 FCS。</li>
</ol>
</li>
<li><strong>字节填充</strong><ol>
<li>PPP 使用异步传输时，把转义符定义为 0x7D (即 01111101)，并使用<strong>字节填充</strong>，RFC 1662 规定了如下所述的填充方法：<ul>
<li>把信息字段中出现的每一个 0x7E 字节转变成为 2 字节序列 (0x7D，0x5E)。</li>
<li>若信息字段中出现一个 0x7D 的字节 (即出现了和转义字符一样的比特组合)，则把 0x7D 转变成为 2 字节序列 (0x7D，0x5D)。</li>
</ul>
</li>
</ol>
</li>
<li><strong>零比特填充</strong><ol>
<li>PPP 协议用在 SONET&#x2F;SDH 链路时，使用同步传输 (一连串的比特连续传送) 而不是异步传输 (逐个字符地传送)。在这种情况下，PPP 协议采用零比特填充方法来实现透明传输。</li>
<li>零比特填充的做法是：在发送端，扫描整个信息字段。只要发现有 5 个连续 1，则立即填入一个 0。因此经过这种零比特填充后的数据，可以保证在信息字段中不会出现 6 个连续 1。接收端在收到一个帧时，先找到标志字段 F 以确定一个帧的边界，接着再用硬件对其中的比特流进行扫描。每当发现 5 个连续 1 时，就把这 5 个连续 1 后的一个 0 删除，以还原成原来的信息比特流 (图 3-11)。这样就保证了透明传输：在所传送的数据比特流中可以传送任意组合的比特流，而不会引起对帧边界的错误判断。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230714180243.png"></li>
</ol>
</li>
</ul>
<h2 id="3-2-3-PPP-协议的工作状态"><a href="#3-2-3-PPP-协议的工作状态" class="headerlink" title="3.2.3 PPP 协议的工作状态"></a>3.2.3 PPP 协议的工作状态</h2><ul>
<li>当用户拨号接入 ISP 后，建立了一条从用户个人电脑到 ISP 的物理连接。这时，用户个人电脑向 ISP 发送一系列的链路控制协议 LCP 分组 (封装成多个 PPP 帧)，以便建立 LCP 连接。这些分组及其响应选择了将要使用的一些 PPP 参数。接着进行网络层配置，网络控制协议 NCP 为新接入的用户个人电脑分配一个临时的 IP 地址。用户个人电脑成为互联网上的一个有 IP 地址的主机；当用户通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放物理层的连接。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_RR12G7EOJ~98TROOF1YPF_Y.png"></li>
<li>PPP 链路的起始和终止状态永远是图 3-12 中的“<strong>链路静止</strong>”状态，这时在用户个人电脑和 ISP 的路由器之间并不存在物理层的连接。</li>
<li>当用户个人电脑通过调制解调器呼叫路由器时，路由器能够检测到调制解调器发出的载波信号。在双方建立了物理层连接后，PPP 进入“<strong>链路建立</strong>”状态，目的是建立链路层的 LCP 连接。</li>
<li>这时 LCP 开始协商<strong>配置选项</strong>，即发送 LCP 的<strong>配置请求帧</strong>。这是个 PPP 帧，其协议字段置为 LCP 对应的代码，而信息字段包含特定的配置请求。链路的另一端可以发送以下几种响应中的一种：<ul>
<li><strong>配置确认帧</strong>　所有选项都接受</li>
<li><strong>配置否认帧</strong>　所有选项都理解但不能接受。</li>
<li><strong>配置拒绝帧</strong>　选项有的无法识别或不能接受，需要协商。</li>
</ul>
</li>
<li>LCP 配置选项包括链路上的最大帧长、所使用的<strong>鉴别协议</strong>的规约，以及不使用 PPP 帧中的地址和控制字段。</li>
<li>协商结束后双方就建立了 LCP 链路，接着就进入“<strong>鉴别</strong>”状态。在这一状态，只允许传送 LCP 协议的分组、鉴别协议的分组以及监测链路质量的分组。若使用<strong>口令鉴别协议</strong> (PAP)，发起通信的一方需要发送身份标识符和口令。系统允许用户重试若干次。如果需要有更好的安全性，可使用更加复杂的<strong>口令握手鉴别协议</strong> (CHAP)。若鉴别身份失败，则转到“<strong>链路终止</strong>”状态。若鉴别成功，则进入“<strong>网络层协议</strong>”状态。</li>
<li>在“<strong>网络层协议</strong>”状态，PPP 链路两端的网络控制协议 NCP 根据网络层的不同协议互相交换网络层特定的网络控制分组。现在的路由器能同时支持多种网络层协议。PPP 协议两端的网络层可以运行不同的网络层协议，但仍然可使用同一个 PPP 协议进行通信。</li>
<li>如果在 PPP 链路上运行的是 IP 协议，则对 PPP 链路的每一端配置 IP 协议模块时要使用 NCP 中支持 IP 的协议——IP <strong>控制协议</strong> (IPCP)。IPCP 分组也封装成 PPP 帧 (其中的协议字段为 0x8021) 在 PPP 链路上传送。在低速链路上运行时，双方可以协商使用压缩的 TCP 和 IP 首部，以减少在链路上发送的比特数。</li>
<li>网络层配置完毕后，链路进入可进行数据通信的“<strong>链路打开</strong>”状态。链路的两个 PPP 端点可以彼此向对方发送分组。两个 PPP 端点还可发送<strong>回送请求</strong> LCP 分组和<strong>回送回答</strong> LCP 分组，以检查链路的状态。</li>
<li>数据传输结束后，可以由链路的一端发出<strong>终止请求</strong> LCP 分组请求终止链路连接，在收到对方发来的<strong>终止确认</strong> LCP 分组后，转到“<strong>链路终止</strong>”状态。如果链路出现故障，会从“<strong>链路打开</strong>”状态转到“<strong>链路终止</strong>”状态。当调制解调器的载波停止后，则回到“<strong>链路静止</strong>”状态。</li>
</ol>
</li>
</ul>
<h1 id="3-3-使用广播信道的数据链路层"><a href="#3-3-使用广播信道的数据链路层" class="headerlink" title="3.3 使用广播信道的数据链路层"></a>3.3 使用广播信道的数据链路层</h1><h2 id="3-3-1-局域网的数据链路层"><a href="#3-3-1-局域网的数据链路层" class="headerlink" title="3.3.1 局域网的数据链路层"></a>3.3.1 局域网的数据链路层</h2><ul>
<li>局域网按网络拓扑进行分类。图 3-13(a) 是<strong>星形网</strong> 。由于<strong>集线器</strong>的出现和双绞线大量用于局域网中，星形以太网以及多级星形结构的以太网获得了广泛的应用。图 3-13(b) 是<strong>环形网</strong> ，图 3-13(c) 为<strong>总线网</strong>，各站直接连在总线上。总线两端的匹配电阻吸收在总线上传播的电磁波信号的能量，避免在总线上产生有害的电磁波反射。总线网以传统以太网最为著名。局域网经过了四十年的发展，以太网已经在局域网市场中占据了绝对优势。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230714234326.png"></li>
</ol>
</li>
<li>共享信道要着重考虑的一个问题是如何使众多用户能够合理而方便地共享通信媒体资源。在技术上有两种方法：<ol>
<li><strong>静态划分信道</strong>，如频分复用、时分复用、波分复用和码分复用等。用户只要分配到了信道就不会和其他用户发生冲突。但这种划分信道的方法代价高，不适合局域网使用。</li>
<li><strong>动态媒体接入控制</strong> ，又称<strong>多点接入</strong>，特点是信道并非在用户通信时固定分配给用户。分为两类：<ul>
<li><strong>随机接入</strong> 　特点是所有的用户可随机地发送信息。但如果恰巧有两个或更多的用户在同一时刻发送信息，在共享媒体上会产生<strong>碰撞</strong> (即发生了<strong>冲突</strong>)，使得这些用户的发送都失败。因此，必须有解决碰撞的网络协议。</li>
<li><strong>受控接入</strong> 　特点是用户不能随机地发送信息，必须服从控制。典型代表有分散控制的令牌环局域网和集中控制的多点线路<strong>探询</strong>，或称为<strong>轮询</strong>。</li>
</ul>
</li>
</ol>
</li>
<li><strong>以太网的两个标准</strong><ol>
<li>为了使数据链路层能更好地适应多种局域网标准，局域网的数据链路层又拆成两个子层，即<strong>逻辑链路控制</strong> (LLC) 子层和<strong>媒体接入控制</strong> (MAC) 子层。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230715094124.png"></li>
</ol>
</li>
<li><strong>适配器的作用</strong><ol>
<li>适配器的一个功能是：进行数据串行传输和并行传输的转换。</li>
<li>适配器所实现的功能包含了数据链路层及物理层这两个层次的功能。</li>
<li>计算机的硬件地址在适配器的 ROM 中，而软件地址——IP 地址，在计算机的存储器中。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230715095506.png"></li>
</ol>
</li>
</ul>
<h2 id="3-3-2-CSMA-CD-协议"><a href="#3-3-2-CSMA-CD-协议" class="headerlink" title="3.3.2 CSMA&#x2F;CD 协议"></a>3.3.2 CSMA&#x2F;CD 协议</h2><ul>
<li>局域网上的计算机被称为“<strong>主机</strong>”、“<strong>工作站</strong>”、“<strong>站点</strong>”或“<strong>站</strong>”。</li>
<li>为了通信的简便，以太网采取两种措施：<ol>
<li>采用灵活的<strong>无连接</strong>的工作方式，不必先建立连接，可以直接发送数据。适配器对发送的数据帧<strong>不进行编号，也不要求对方发回确</strong>。<strong>以太网提供的服务是尽最大努力的交付</strong>，即<strong>不可靠的交付</strong>。当目的站收到有差错的数据帧时，就把帧丢弃，其他什么也不做。<strong>对有差错帧是否需要重传则由高层来决定</strong>。例如，如果高层使用 TCP 协议，那么 TCP 就会发现丢失了一些数据。于是经过一定的时间后，TCP 就把这些数据重新传递给以太网进行重传。<strong>但以太网并不知道这是重传帧，而是当作新的数据帧来发送</strong>。</li>
<li>以太网发送的数据使用<strong>曼彻斯特编码</strong>的信号。二进制基带数字信号通常是高、低电压交替出现的信号。使用这种信号的问题是当出现一长串的连 1 或连 0 时，接收端就无法从收到的比特流中提取位同步 (即比特同步) 信号。如图 3-16 所示，曼彻斯特编码的编码方法是把每一个码元分成两个相等的间隔。码元 1 是前一个间隔为低电压而后一个间隔为高电压。码元 0 则正好相反，从高电压变到低电压 (也可采用相反的约定，即 1 是“前高后低”而 0 是“前低后高”)，保证了在每一个码元的正中间出现一次电压的转换，接收端利用这种电压的转换很方便地把位同步信号提取出来。缺点是它所占的频带宽度比原始的基带信号增加了一倍 (因为每秒传送的码元数加倍了)。<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230716104158.png"></li>
</ul>
</li>
</ol>
</li>
<li>CSMA&#x2F;CD 协议的要点：<ol>
<li><strong>多点接入</strong>　　总线型网络，计算机以多点接入的方式连接在一根总线上。实质是”载波监听”和”碰撞检测”。</li>
<li><strong>载波监听</strong>　　用电子技术检测总线上有没有其他计算机也在发送。载波监听是检测信道。<strong>不管在发送前，还是在发送中，每个站都必须不停地检测信道</strong>。在发送前检测信道，是为了获得发送权。如果检测出已经有其他站在发送，则暂时不发送数据，等到信道变为空闲时才发送。在发送中检测信道，是为了及时发现有没有其他站的发送和本站发送的碰撞。</li>
<li><strong>碰撞检测</strong>　　<strong>边发送边监听</strong>，即适配器边发送数据边检测信道上的信号电压的变化情况，以判断自己在发送数据时其他站是否也在发送数据。当几个站同时在总线上发送数据时，总线上的信号电压变化幅度会增大 (互相叠加)。当适配器检测到信号电压变化幅度超过门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞，总线上传输的信号严重失真，无法从中恢复出有用的信息来。任何一个正在发送数据的站，一旦发现总线上出现了碰撞，其适配器要停止发送。“碰撞检测”也称为“<strong>冲突检测</strong>”。</li>
<li>因为电磁波在总线上以有限的速率传播，所以即使每个站在发送数据之前已经监听到信道为“<strong>空闲</strong>”，还会出现数据在总线上的碰撞。这和开会相似，一听见会场安静，我们就立即发言，但偶尔也会发生几个人同时抢着发言而产生冲突的情况。</li>
<li>图 3-17 所示的例子可以说明这种情况。设图中的局域网两端的站 A 和 B 相距 1km，用同轴电缆相连。<strong>电磁波在</strong> 1km <strong>电缆的传播时延约为</strong> 5µs。因此，A 向 B 发出的数据，在约 5µs 后才能传送到 B。 若在 A 发送的数据到达 B 前，B 也发送，则在某个时间和 A 发送的帧会发生碰撞。碰撞的结果是两个帧都变得无用。在局域网的分析中，常把总线上的<strong>单程端到端传播时延</strong>记为 τ。A 发送数据后，<strong>最迟要两倍的总线端到端的传播时延</strong> (2τ)，或总线的端到端往返传播时延才能知道自己发送的数据和其他站发送的数据有没有发生碰撞。由于局域网上任意两个站之间的传播时延有长有短，因此局域网必须按最坏情况设计，即取总线两端的两个站之间的传播时延  (这两个站之间的距离最大) 为端到端传播时延。</li>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230716104615.png"><ul>
<li>下面是图 3-17 中的一些重要的时刻。<br> 在 <em>t</em>＝0 时，A 发送数据。B 检测到信道为空闲。<br> 在 <em>t</em>＝<em>τ−δ</em> 时，A 发送的数据还没有到达 B 时，由于 B 检测到信道是空闲的，因此 B 发送数据。<br> 经过时间 <em>δ</em>&#x2F;2 后，即在 <em>t</em>＝<em>τ−δ</em>&#x2F;2 时，A 发送的数据和 B 发送的数据发生了碰撞。但这时 A 和 B 都不知道发生了碰撞。<br> 在 <em>t</em>＝<em>τ</em>  时，B 检测到发生了碰撞，于是停止发送数据。<br> 在 <em>t</em>＝2<em>τ−δ</em> 时，A 也检测到发生了碰撞，因而也停止发送数据。<br> A 和 B 发送数据均失败，它们都要推迟一段时间再重新发送。</li>
<li><strong>每一个站在自己发送数据之后的一小段时间内，存在着遭遇碰撞的可能性</strong>。这一小段时间是<strong>不确定的</strong>，它取决于另一个发送数据的站到本站的距离。因此，以太网<strong>不能保证</strong>某一时间之内一定能够把自己的数据帧成功地发送出去。这一特点称为<strong>发送的不确定性</strong>。如果希望在以太网上发生碰撞的机会很小，必须使整个以太网的平均通信量远小于以太网的最高数据率。</li>
<li>从图 3-17 可看出，最先发送数据帧的 A 站，在发送数据帧后<strong>至多</strong>经过时间 2<em>τ</em> 就可知道所发送的数据帧是否遭受了碰撞。这就是 <em>δ</em>→0 的情况。因此以太网的端到端往返时间 2<em>τ</em> 称为<strong>争用期</strong>。争用期又称为<strong>碰撞窗口</strong>。因为一个站在发送完数据后，只有通过争用期的“考验”，即<strong>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞</strong>。这时，就可以放心把这一帧数据顺利发送完毕。</li>
</ul>
</li>
<li>在使用 CSMA&#x2F;CD 协议时，一个站<strong>不能同时进行发送和接收 (但必须边发送边监听信道</strong>)，以太网不能进行全双工通信而只能进行**双向交替通信 (半双工通信)**。</li>
<li>以太网使用<strong>截断二进制指数退避</strong>算法确定碰撞后重传的时机。这种算法让发生碰撞的站在停止发送数据后，不是等待信道变为空闲后立即再发送数据，而是<strong>推迟</strong> (即退避 ) 一个随机的时间。因为如果几个发生碰撞的站都在监听信道，那么都会同时发现信道变成了空闲。如果大家都同时再重新发送，那么肯定又会发生碰撞。为了使各站进行重传时再次发生冲突的概率减小，具体的退避算法如下：<ul>
<li>协议规定了基本退避时间为争用期 2<em>τ</em>，具体的<strong>争用期时间是</strong> 51.2µs。对于 10Mbit&#x2F;s 以太网，在争用期内可发送 512bit，即 64 字节。也可以<strong>直接使用比特作为争用期的单位</strong>，争用期是 512bit，即发送 512bit 所需的时间。</li>
<li>从离散的整数集合［0，1，…，(2<em>k</em> −1)］中随机取出一个数，记为 <em>r</em>。重传应推后的时间就是 <em>r</em> 倍的争用期。参数 <em>k</em> 按下面的公式 (3-1) 计算：<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230716154602.png"></li>
<li>可见当重传次数不超过 10 时，参数 <em>k</em> 等于重传次数；但当重传次数超过 10 时，<em>k</em> 就等于 10。</li>
</ol>
</li>
<li>当重传达 16 次仍不能成功时，则丢弃该帧，并向高层报告。</li>
</ul>
</li>
<li>以太网在发送数据时，如果在争用期 (共发送了 64 字节) 没有发生碰撞，那么后续发送的数据就一定不会发生冲突。如果发生碰撞，一定是在发送的前 64 字节之内。由于一检测到冲突就立即中止发送，这时已经发送出去的数据一定小于 64 字节，因此<strong>凡长度小于 64 字节的帧都是由于冲突而异常中止的无效帧</strong>。只要收到了这种无效帧，就应当立即将其丢弃。</li>
<li><strong>强化碰撞</strong>是当发送数据的站一旦发现发生了碰撞时，除了立即停止发送数据外，还要再继续发送 32 比特或 48 比特的<strong>人为干扰信号</strong>，以便让所有用户都知道现在已经发生了碰撞。<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230716154825.png"></li>
<li>A 站从发送数据开始到发现碰撞并停止发送的时间间隔是 *T<sub>B</sub>*。A 站得知碰撞已经发生时所发送的强化碰撞的干扰信号的持续时间是 <em>T<sub>J</sub></em> 。图中的 B 站在得知发生碰撞后，也要发送人为干扰信号。发生碰撞使 A浪费时间 <em>T<sub>B</sub></em> ＋ <em>T<sub>J</sub><em>。可是整个信道被占用的时间还要增加一个单程端到端的传播时延 t。因此总线被占用的时间是 <em>T<sub>B</sub></em> ＋</em>T<sub>J</sub></em> ＋τ。</li>
</ul>
</li>
<li>CSMA&#x2F;CD 协议的要点如下：<ul>
<li>准备发送：适配器从网络层获得一个分组，加上以太网的首部和尾部，组成以太网帧，放入适配器的缓存中。但在发送之前，必须<strong>先检测信道</strong>。</li>
<li>检测信道：若检测到信道忙，则应不停地检测，一直等待信道转为空闲。若检测到信道空闲，并在 96 比特时间内信道保持空闲 (保证了帧间最小间隔)，就发送这个帧。</li>
<li>在发送过程中仍不停地检测信道，即网络适配器要<strong>边发送边监听</strong>。有两种可能性：<ol>
<li>发送成功：在争用期内一直未检测到碰撞。这个帧肯定能够发送成功。发送完毕后，其他什么也不做。然后回到 (1)。</li>
<li>发送失败：在争用期内检测到碰撞。这时立即停止发送数据，并按规定发送人为干扰信号。适配器接着就执行指数退避算法，等待 <em>r</em> 倍 512 比特时间后，返回到步骤(2)，继续检测信道。但若重传达 16 次仍不能成功，则停止重传而向上报错。</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="3-3-3-使用集线器的星形拓扑"><a href="#3-3-3-使用集线器的星形拓扑" class="headerlink" title="3.3.3 使用集线器的星形拓扑"></a>3.3.3 使用集线器的星形拓扑</h2><ul>
<li>10BASE-T <strong>双绞线以太网的出现，是局域网发展史上的一个重要的里程碑</strong>，从此以太网的拓扑就从总线型变为更加方便的星形网络，而以太网也就在局域网中占据了统治地位。双绞线比无源电缆可靠、价格便宜且使用方便。</li>
<li>使双绞线能够传送高速数据的措施是把双绞线的绞合度做得非常精确。这样不仅可使特性阻抗均匀以减少失真，而且减少了电磁波辐射和无线电频率的干扰。</li>
<li>集线器的特点如下：<ol>
<li>从表面上看，使用集线器的局域网在物理上是一个星形网，但由于集线器使用电子器件来模拟实际电缆线的工作，因此整个系统仍像一个传统以太网那样运行。<strong>使用集线器的以太网在逻辑上仍是一个总线网，各站共享逻辑上的总线，使用的还是 CSMA&#x2F;CD 协议</strong>。网络中的各站必须竞争对传输媒体的控制，并且在<strong>同一时刻至多只允许一个站发送数据</strong>。</li>
<li>一个集线器有许多<strong>接口</strong>，用两对双绞线与一台计算机上的适配器相连，很像一个<strong>多接口的转发器</strong>。</li>
<li><strong>集线器工作在物理层</strong>，它的每个接口仅仅<strong>简单地转发比特</strong>——收到 1 就转发 1，收到 0 就转发 0，<strong>不进行碰撞检测</strong>。若两个接口同时有信号输入 (即发生碰撞)，那么所有的接口都将收不到正确的帧。图 3-20 是具有三个接口的集线器的示意图。<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230716163035.png"></li>
</ul>
</li>
<li>集线器采用专门的芯片，进行自适应串音回波抵消。可使接口转发出去的较强信号不致对该接口接收到的较弱信号产生干扰 (这种干扰即近端串音)。每个比特在转发之前还要进行再生整形并重新定时。</li>
</ol>
</li>
</ul>
<h2 id="3-3-4-以太网的信道利用率"><a href="#3-3-4-以太网的信道利用率" class="headerlink" title="3.3.4 以太网的信道利用率"></a>3.3.4 以太网的信道利用率</h2><ul>
<li>一个站在发送帧时出现了碰撞。经过一个争用期 2<em>τ</em> 后，可能又出现了碰撞，经过若干个争用期后发送成功。假定发送帧需要的时间是 *T<sub>0</sub>*。它等于帧长 (bit) 除以发送速率 (10Mbit&#x2F;s)。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230716221408.png"></li>
<li>成功发送一个帧需要占用信道的时间是 <em>T<sub>0</sub></em>+<em>τ</em>，比这个帧的发送时间要多一个单程端到端时延 <em>τ</em>。这是因为当一个站发送完最后一个比特时，这个比特还要在以太网上传播。在极端的情况下，发送站在传输媒体的一端，而比特在媒体上传输到另一端所需的时间是 <em>τ</em>。因此，必须在经过时间 <em>T<sub>0</sub></em>+<em>τ</em> 后以太网的媒体才完全进入空闲状态，才能允许其他站发送数据。</li>
<li>要提高以太网的信道利用率，就必须减小 <em>τ</em> 与 <em>T<sub>0</sub></em> 之比。在以太网中定义了参数 <em>a</em>，它是以太网<strong>单程端到端时延</strong> <em>τ</em> 与<strong>帧的发送时间</strong> <em>T<sub>0</sub></em> 之比：<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230716222853.png"></li>
<li>当 <em>a</em>→0 时，表示只要发生碰撞，就立即可以检测出来，并立即停止发送，因而信道资源被浪费的时间非常少。反之，表明争用期所占的比例越大，使得每发生一次碰撞就浪费了不少的信道资源，信道利用率明显降低。因此，以太网的<strong>参数</strong> <em>a</em> <strong>的值应当尽可能小些</strong> 。这就要求分子 <em>τ</em> 的数值要小些，分母 <em>T<sub>0</sub></em> 的数值要大些。当数据率一定时，<strong>以太网的连线的长度受到限制</strong>，同时<strong>以太网的帧长不能太短</strong>。</li>
</ul>
</li>
<li>考虑一种<strong>理想化</strong>的情况。假定以太网上的各站发送数据都不会产生碰撞，并且能够有效地利用网络的传输资源，即总线一旦空闲就有某一个站立即发送数据。这样，发送一帧占用线路的时间是 <em>T<sub>0</sub></em> ＋<em>τ</em>，而帧本身的发送时间是 *T<sub>0</sub>*。于是我们可计算出极限信道利用率 <em>S<sub>max</sub></em> 为：<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230716225325.png"></li>
<li>虽然实际的以太网不可能有这样高的极限信道利用率，<strong>只有当参数</strong> <em>a</em> <strong>远小于 1 才能得到尽可能高的极限信道利用率</strong>。若参数 <em>a</em> 远大于1，则极限信道利用率就远小于 1，实际的信道利用率就更小了。据统计，当以太网的利用率达到 30％ 时就已经处于重载的情况。很多的网络容量被网上的碰撞消耗掉了。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="3-3-5-以太网的-MAC-层"><a href="#3-3-5-以太网的-MAC-层" class="headerlink" title="3.3.5 以太网的 MAC 层"></a>3.3.5 以太网的 MAC 层</h2><ul>
<li><strong>MAC 层的硬件地址</strong><ol>
<li>在局域网中，<strong>硬件地址</strong>又称<strong>物理地址</strong>或 <strong>MAC 地址</strong> (因为这种地址用在 MAC 帧中)。</li>
<li>在所有计算机系统的设计中，<strong>标识系统</strong>都是一个核心问题。在标识系统中，地址是识别某个系统的标识符。<ul>
<li><strong>名字指出我们所要寻找的那个资源，地址指出那个资源在何处，路由告诉我们如何到达该处</strong>。</li>
<li><strong>严格地讲，名字与系统的所在地无关</strong>。就像我们每一个人的名字一样，不随我们所处的地点而改变。但是 IEEE 802 标准为局域网规定了一种 48 位的全球地址，是指局域网上的每一台计算机中<strong>固化在适配器的 ROM 中的地址</strong>。<ol>
<li>假定连接在局域网上的一台计算机的适配器坏了，我们更换了一个新的适配器，那么这台计算机的局域网的“地址”就改变了。</li>
<li>假定我们把位于南京的某局域网上的一台笔记本电脑携带到北京，并连接在北京的某局域网上。虽然这台电脑的地理位置改变了，但只要电脑中的适配器不变，那么该电脑在北京的局域网中的“地址”仍然和它在南京的局域网中的“地址”一样。</li>
</ol>
</li>
</ul>
</li>
<li>在生产适配器时，6 字节的 MAC 地址已被固化在适配器的 ROM 中。因此，MAC 地址也叫做<strong>硬件地址</strong>或<strong>物理地址</strong>，实际上就是<strong>适配器地址</strong>或<strong>适配器标识符</strong> EUI-48。当这块适配器插入(或嵌入) 到某台计算机后，适配器上的标识符 EUI-48 就成为这台计算机的 MAC 地址了。</li>
<li>地址记法中有两种标准：<ul>
<li>第一种记法是把每一字节的<strong>最低位</strong>写在最左边 (最左边的最低位是第一位)。</li>
<li>第二种记法是把每一字节的<strong>最高位</strong>写在最左边 (最左边的最高位是第一位)。</li>
<li>在发送数据时，两种记法都是按照字节的顺序发送，但每一个字节中先发送哪一位则不同：第一种记法先发送最低位，第二种记法先发送最高位。</li>
</ul>
</li>
<li>适配器有<strong>过滤功能</strong>。但适配器从网络上每收到一个 MAC 帧就先用硬件检查 MAC 帧中的目的地址。如果是发往本站的帧，则收下，然后再进行其他的处理。否则就将此帧丢弃，不再进行其他的处理。这样做就不浪费主机的处理机和内存资源。这里“发往本站的帧”包括以下三种帧：<ul>
<li><strong>单播帧</strong> (一对一)，即收到的帧的 MAC 地址与本站的硬件地址相同。</li>
<li><strong>广播帧</strong> (一对全体)，即发送给本局域网上所有站点的帧 (全 1 地址)。</li>
<li><strong>多播帧</strong> (一对多)，即发送给本局域网上一部分站点的帧。</li>
</ul>
</li>
</ol>
</li>
<li><strong>MAC 帧的格式</strong><ol>
<li>常用的以太网 MAC 帧格式有两种标准，一种是 DIX Ethernet V2 标准 (即以太网 V2 标准)，另一种是 IEEE 的 802.3 标准。<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230717111013.png"></li>
</ul>
</li>
<li>以太网 V2 的 MAC 帧较为简单，由五个字段组成。前两个字段分别为 6 字节长的<strong>目的地址</strong>和<strong>源地址</strong>字段。第三个字段是 2 字节的<strong>类型字段</strong>，用来标志上一层使用的是什么协议，以便把收到的 MAC 帧的数据上交给上一层的这个协议。第四个字段是<strong>数据字段</strong>，其长度在 46 到 1500 字节之间 (46 字节是这样得出的：最小长度 64 字节减去 18 字节的首部和尾部就得出数据字段的最小长度)。最后一个字段是 4 字节的<strong>帧检验序列</strong> FCS (使用 CRC 检验)。当传输媒体的误码率为 1×10<sup>−8</sup> 时，MAC 子层可使未检测到的差错小于 1×10<sup>−14</sup>。</li>
<li>为了接收端实现位同步，从 MAC 子层向下传到物理层时要在帧的前面插入 8 字节 (由硬件生成)，它由两个字段构成：<ul>
<li>7 个字节的<strong>前同步码</strong> (1 和 0 交替码)，作用是使接收端的适配器在接收 MAC 帧时能够迅速调整其时钟频率，使它和发送端的时钟同步，也就是“实现位同步”。</li>
<li><strong>帧开始定界符</strong>，定义为 10101011。它的前六位的作用和前同步码一样，最后的两个连续的 1 就是告诉接收端适配器：“MAC 帧的信息马上就要来了，请适配器注意接收”。</li>
</ul>
</li>
<li>IEEE 802.3 标准规定凡出现下列情况之一的即为无效的 MAC 帧：<ul>
<li>帧的长度不是整数个字节；</li>
<li>用收到的帧检验序列 FCS 查出有差错；</li>
<li>收到的帧的 MAC 客户数据字段的长度不在 46～1500 字节之间。考虑到 MAC 帧首部和尾部的长度共有 18 字节，可以得出有效的 MAC 帧长度为 64～1518 字节之间。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="3-4-扩展的以太网"><a href="#3-4-扩展的以太网" class="headerlink" title="3.4 扩展的以太网"></a>3.4 扩展的以太网</h1><h2 id="3-4-1-在物理层扩展以太网"><a href="#3-4-1-在物理层扩展以太网" class="headerlink" title="3.4.1 在物理层扩展以太网"></a>3.4.1 在物理层扩展以太网</h2><ul>
<li>扩展主机和集线器之间距离的一种方法是使用一对光纤和一对光纤调制解调器，如图 3-23 所示：<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230717223544.png"></li>
</ol>
</li>
<li>光纤调制解调器的作用是进行电信号和光信号的转换。光纤的时延小，带宽宽，使用这种方法可以使主机和几公里以外的集线器相连接。</li>
<li>如果使用多个集线器，可以连接成覆盖更大范围的多级星形结构的以太网。例如，一个学院的三个系各有一个 10BASE-T 以太网 (a)，可通过一个主干集线器把各系的以太网连接起来，成为一个更大的以太网 (b)。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230717223829.png"></li>
<li>有以下好处：<ul>
<li>使这个学院不同系的以太网上的计算机能够进行跨系的通信。</li>
<li>扩大了以太网覆盖的地理范围。</li>
</ul>
</li>
<li>但这种多级结构的集线器以太网也带来了一些缺点：<ul>
<li>如图 (a) 所示的例子，在三个系的以太网互连起来之前，每一个系的以太网是一个独立的<strong>碰撞域</strong> (冲突域)，在任一时刻，在每一个碰撞域中只能有一个站在发送数据。每一个系的以太网的最大吞吐量是 10Mbit&#x2F;s，因此三个系总的最大吞吐量共有 30Mbit&#x2F;s。在三个系的以太网通过集线器互连起来后就把三个碰撞域变成一个碰撞域 (范围扩大到三个系)，如图 (b) 所示，而这时的最大吞吐量仍然是一个系的吞吐量 10Mbit&#x2F;s。这就是说，当某个系的两个站在通信时所传送的数据会通过所有的集线器进行转发，使得其他系的内部在这时都不能通信 (一发送数据就会碰撞)。</li>
<li>如果不同的系使用不同的以太网技术 (如数据率不同)，那么就不可能用集线器将它们互连起来。如果在图 3-24 中，一个系使用 10Mbit&#x2F;s 的适配器，而另外两个系使用10&#x2F;100Mbit&#x2F;s 的适配器，那么用集线器连接起来后，大家都只能工作在 10Mbit&#x2F;s 的速率。集线器基本上是个多接口的转发器，不能把帧进行缓存。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="3-4-2-在数据链路层扩展以太网"><a href="#3-4-2-在数据链路层扩展以太网" class="headerlink" title="3.4.2 在数据链路层扩展以太网"></a>3.4.2 在数据链路层扩展以太网</h2><ul>
<li>使用<strong>网桥</strong>扩展以太网的方法在数据链路层进行。网桥对收到的帧根据其 MAC 帧的目的地址进行<strong>转发</strong>和<strong>过滤</strong>。当网桥收到一个帧时，并不是向所有的接口转发此帧，而是根据此帧的目的 MAC 地址，查找网桥中的地址表，然后确定将该帧转发到哪一个接口，或者是把它丢弃。</li>
<li><strong>交换式集线器</strong>淘汰了网桥。交换式集线器称为以太网<strong>交换机</strong>或<strong>第二层交换机</strong>，强调这种交换机<strong>工作在数据链路层</strong>。</li>
<li><strong>以太网交换机的特点：</strong><ol>
<li>以太网交换机实质上是一个<strong>多接口的网桥</strong>，通常都有十几个或更多的接口，和工作在物理层的转发器、集线器有很大的差别。以太网交换机的每个接口都直接与一个单台主机或另一个以太网交换机相连，一般都在全双工方式。以太网交换机还具有并行性，能同时连通多对接口，使多对主机能同时通信 (而网桥只能一次分析和转发一个帧)。相互通信的主机都是<strong>独占传输媒体，无碰撞地传输数据</strong>。</li>
<li>以太网交换机的接口有存储器，能在输出端口繁忙时把到来的帧进行缓存。如果连接在以太网交换机上的两台主机，同时向另一台主机发送帧，那么当这台主机的接口繁忙时，发送帧的这两台主机的接口会把收到的帧暂存一下，以后再发送出去。</li>
<li>以太网交换机是一种即插即用设备，其内部的帧<strong>交换表</strong> (地址表) 是通过自学习算法自动地逐渐建立起来的。以太网交换机由于使用了专用的交换结构芯片，用硬件转发，其转发速率要比使用软件转发的网桥快很多。</li>
<li>以太网交换机的性能远超普通的集线器，而且价格不贵。</li>
<li>以太网交换机都具有多种速率的接口，方便了各种不同情况的用户。</li>
</ol>
</li>
<li><strong>以太网交换机的自学习功能</strong><ol>
<li>假定在图 3-25 中的以太网交换机有 4 个接口，各连接一台计算机，其 MAC 地址分别是 A，B，C 和 D。在一开始，以太网交换机里面的交换表是空的 (a)。<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230718171025.png"></li>
<li>A 先向 B 发送一帧，从接口 1 进入到交换机。交换机收到帧后，先查找交换表，没有查到应从哪个接口转发这个帧 (在 MAC 地址这一列中，找不到目的地址为 B 的项目)。接着，交换机把这个帧的源地址 A 和接口 1 写入交换表中，并向除接口 1 以外的所有接口广播这个帧。</li>
<li>C 和 D 丢弃这个帧，因为目的地址不对。B 收下这个帧。也称<strong>过滤</strong>。</li>
<li>从新写入交换表的项目 (A，1) 可以看出，以后不管从哪一个接口收到帧，只要其目的地址是 A，就应当把收到的帧从接口 1 转发出去。依据是：既然 A 发出的帧是从接口 1 进入到交换机的，那么从交换机的接口 1 转发出的帧也应可以到达 A。</li>
<li>假定接下来 B 通过接口 3 向 A 发送一帧。交换机查找交换表，发现交换表中的 MAC 地址有 A。表明要发送给 A 的帧 (即目的地址为 A 的帧) 应从接口 1 转发。于是就把这个帧传送到接口 1 转发给 A。显然，现在已经没有必要再广播收到的帧。交换表这时新增加的项目 (B，3)，表明今后如有发送给 B 的帧，就应当从接口 3 转发出去。</li>
<li>经过一段时间后，只要主机 C 和 D 也向其他主机发送帧，以太网交换机中的交换表就会把转发到 C 或 D 应当经过的接口号 (2 或 4) 写入到交换表中。这样，交换表中的项目就齐全了。要转发给任何一台主机的帧，都能够很快地在交换表中找到相应的转发接口。</li>
</ul>
</li>
<li>考虑到有时可能要在交换机的接口更换主机，或者主机要更换其网络适配器，这就需要更改交换表中的项目。为此，在交换表中每个项目都设有一定的有效时间。过期的项目就自动被删除。用这样的方法保证交换表中的数据符合当前网络的实际状况。</li>
<li>以太网交换机的这种自学习方法使得以太网交换机能够即插即用，非常方便。</li>
<li>为了增加网络的可靠性，在使用以太网交换机组网时，会增加一些冗余的链路。在这种情况下，自学习的过程就可能导致以太网帧在网络的某个环路中无限制地兜圈子。用图 3-26 的例子来说明这个问题。<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230718172449.png"></li>
<li>在图3-26 中，假定一开始主机 A 通过接口交换机 #1 向主机 B 发送一帧。交换机 #1 收到这个帧后就向所有其他接口进行广播发送。现观察其中一个帧的走向：离开交换机 #1 的接口 3→ 交换机 #2 的接口 1→ 接口 2→ 交换机 #1 的接口 4→ 接口 3→ 交换机 #2 的接口 1→……。无限制地循环兜圈子下去，消耗网络资源。</li>
<li>为了解决这种兜圈子问题，制定了一个<strong>生成树协议</strong> STP。要点是不改变网络的实际拓扑，但在逻辑上则切断某些链路，使得从一台主机到所有其他主机的路径是无环路的树状结构，从而消除了兜圈子现象。</li>
</ul>
</li>
</ol>
</li>
<li><strong>从总线以太网到星形以太网</strong><ol>
<li>随着以太网上站点数目的增多，总线结构以太网的可靠性下降。与此同时，大规模集成电路以及专用芯片的发展，使得星形结构的以太网交换机既便宜又可靠。在这种情况下，采用以太网交换机的星形结构成为首选拓扑，而传统的总线以太网也很快从市场上消失了。</li>
<li>总线以太网使用 CSMA&#x2F;CD 协议，以半双工方式工作。但以太网交换机不使用共享总线，没有碰撞问题，因此不使用 CSMA&#x2F;CD 协议，而是以全双工方式工作。以太网交换机的帧结构未改变，<strong>仍然采用以太网的帧结构</strong>。</li>
</ol>
</li>
</ul>
<h2 id="3-4-3-虚拟局域网"><a href="#3-4-3-虚拟局域网" class="headerlink" title="3.4.3 虚拟局域网"></a>3.4.3 虚拟局域网</h2><ul>
<li>虚拟局域网 VLAN 这样定义：虚拟局域网 VLAN 是由一些局域网网段构成的与物理位置无关的逻辑组，这些网段具有某些共同的需求。每一个 VLAN 的帧都有明确的标识符，指明发送这个帧的计算机属于哪一个 VLAN。</li>
<li>虚拟局域网其实是局域网给用户提供的一种服务，并不是新型局域网。</li>
<li>图 3-27 画的是使用了四个交换机的网络拓扑。设有 10 台计算机分配在三个楼层中，构成了三个局域网，即: LAN<sub>1</sub>:  (A<sub>1</sub>，A<sub>2</sub>，B<sub>1</sub>，C<sub>1</sub>)，LAN<sub>2</sub>: (A<sub>3</sub>，B<sub>2</sub>，C<sub>2</sub>)，LAN<sub>3</sub>: (A<sub>4</sub>，B<sub>3</sub>，C<sub>3</sub>)；这 10 个用户划分为三个工作组，也就是说划分为三个虚拟局域网 VLAN。即: VLAN<sub>1</sub>: (A<sub>1</sub>，A<sub>2</sub>，A<sub>3</sub>，A<sub>4</sub>)，VLAN<sub>2</sub>: (B<sub>1</sub>，B<sub>2</sub>，B<sub>3</sub>)；VLAN<sub>3</sub>：(C<sub>1</sub>，C<sub>2</sub>，C<sub>3</sub>)。<ol>
<li><img src="https://cdn.jsdelivr.net/gh/chipfron/Image_/test_Pasted%20image%2020230718180349.png"></li>
<li>从图 3-27 可看出，每一个 VLAN 的计算机可处在不同的局域网中，也可以不在同一层楼中。</li>
</ol>
</li>
</ul>
<h1 id="3-5-高速以太网"><a href="#3-5-高速以太网" class="headerlink" title="3.5 高速以太网"></a>3.5 高速以太网</h1><h2 id="3-5-1-100BASE-T以太网"><a href="#3-5-1-100BASE-T以太网" class="headerlink" title="3.5.1 100BASE-T以太网"></a>3.5.1 100BASE-T以太网</h2><ul>
<li>100BASE-T 是在双绞线上传送 100Mbit&#x2F;s 基带信号的星形拓扑以太网，CSMA&#x2F;CD 协议，它又称为<strong>快速以太网</strong>。</li>
<li>100BASE-T 可使用以太网交换机提供很好的服务质量，可在全双工方式下工作而无冲突发生。因此，CSMA&#x2F;CD 协议对全双工方式工作的快速以太网是不起作用的（但在半双工方式工作时则一定要使用 CSMA&#x2F;CD 协议）。快速以太网使用的 MAC 帧格式仍然是 IEEE 802.3标准规定的帧格式。</li>
<li><strong>从细缆以太网升级到快速以太网的用户必须重新布线</strong>。</li>
</ul>
<h2 id="3-5-2-吉比特以太网"><a href="#3-5-2-吉比特以太网" class="headerlink" title="3.5.2 吉比特以太网"></a>3.5.2 吉比特以太网</h2><ul>
<li>吉比特以太网的标准 IEEE 802.3z 有以下特点：<ol>
<li>允许在 1Gbit&#x2F;s 下以全双工和半双工两种方式工作。</li>
<li>使用 IEEE 802.3 协议规定的帧格式。</li>
<li>在半双工方式下使用 CSMA&#x2F;CD 协议，而在全双工方式不使用 CSMA&#x2F;CD 协议。</li>
<li>与 10BASE-T 和 100BASE-T 技术向后兼容。</li>
</ol>
</li>
<li>吉比特以太网的物理层使用两种成熟的技术：<ol>
<li>来自现有的以太网。</li>
<li>美国国家标准协会 ANSI 制定的<strong>光纤通道</strong>，采用成熟技术就能大大缩短吉比特以太网标准的开发时间。</li>
</ol>
</li>
<li>吉比特以太网工作在半双工方式时，必须进行碰撞检测。由于数据率提高了，因此只有减小最大电缆长度或增大帧的最小长度，才能使参数 <em>a</em> 保持为较小的数值。若将吉比特以太网最大电缆长度减小到 10m，网络的实际价值就大大减小。而若将最短帧长提高到 640 字节，则在发送短数据时开销太大。因此，吉比特以太网仍然保持一个网段的最大长度为 100m，采用了<strong>载波延伸</strong>的办法，使最短帧长仍为 64 字节，同时将争用期增大为 512 字节。凡发送的 MAC 帧长不足 512 字节时，就用一些特殊字符填充在帧的后面，使 MAC 帧的发送长度增大到 512 字节，这对有效载荷并无影响。接收端在收到以太网的 MAC 帧后，要把所填充的特殊字符删除后才向高层交付。当原来仅 64 字节长的短帧填充到 512 字节时，所填充的 448 字节就造成了很大的开销。为此，吉比特以太网还增加了一种功能称为<strong>分组突发</strong>。这就是当很多短帧要发送时，第一个短帧要采用上面所说的载波延伸的方法进行填充。但随后的一些短帧则可一个接一个地发送，它们之间只需留有必要的帧间最小间隔即可。这样就形成一串分组的突发，直到达到 1500 字节或稍多一些为止。当吉比特以太网工作在全双工方式时 (即通信双方可同时进行发送和接收数据)，不使用载波延伸和分组突发。</li>
</ul>
<h2 id="3-5-3-10-吉比特以太网"><a href="#3-5-3-10-吉比特以太网" class="headerlink" title="3.5.3 10 吉比特以太网"></a>3.5.3 10 吉比特以太网</h2><ul>
<li>10GE 的帧格式与 10Mbit&#x2F;s，100Mbit&#x2F;s 和 1Gbit&#x2F;s 以太网的<strong>帧格式完全相同</strong>，并保留了 802.3 标准规定的<strong>以太网最小帧长和最大帧长</strong>。使用户在将其已有的以太网进行升级时，仍能和较低速率的以太网很方便地通信。</li>
<li>10GE <strong>只工作在全双工方式，不存在争用问题，也不使用</strong> CSMA&#x2F;CD <strong>协议</strong>。使得 10GE 的传输距离大大提高了 (因为不再受必须进行碰撞检测的限制)。</li>
<li>现在以太网的工作范围已经从局域网 (校园网、企业网) 扩大到城域网和广域网，从而实现了端到端的以太网传输。这种工作方式的好处是：<ol>
<li>以太网是一种经过实践证明的成熟技术，无论是互联网服务提供者 ISP 还是端用户都愿意使用以太网。对 ISP 来说，使用以太网还需要在更大的范围进行试验。</li>
<li>以太网的互操作性很好，不同厂商生产的以太网都能可靠地进行互操作。</li>
<li>在广域网中使用以太网时，价格大约只有同步光纤网 SONET 的五分之一和异步传递方式 ATM 的十分之一。以太网还能够适应多种传输媒体，如铜缆、双绞线以及各种光缆。使具有不同传输媒体的用户在进行通信时不必重新布线。</li>
<li>端到端的以太网连接使帧的格式全都是以太网的格式，而不需要再进行帧的格式转换，简化了操作和管理。但是，以太网和现有的其他网络，如帧中继或 ATM 网络，仍然需要有相应的接口才能进行互连。</li>
</ol>
</li>
<li>以太网从 10Mbit&#x2F;s 到 10Gbit&#x2F;s 甚至到 100Gbit&#x2F;s 的演进，证明了以太网是：<ol>
<li>可扩展的 (速率从 10Mbit&#x2F;s 到 100Gbit&#x2F;s)。</li>
<li>灵活的 (多种媒体、全&#x2F;半双工、共享&#x2F;交换)。</li>
<li>易于安装。</li>
<li>稳健性好。</li>
</ol>
</li>
</ul>
<h2 id="3-5-4-使用以太网进行宽带接入"><a href="#3-5-4-使用以太网进行宽带接入" class="headerlink" title="3.5.4 使用以太网进行宽带接入"></a>3.5.4 使用以太网进行宽带接入</h2><ul>
<li>以太网接入的一个重要特点是它可以提供双向的宽带通信，并且可以根据用户对带宽的需求灵活地进行带宽升级。当城域网和广域网都采用吉比特以太网或 10 吉比特以太网时，采用以太网接入可以实现端到端的以太网传输，中间不需要再进行帧格式的转换。提高了数据的传输效率且降低了传输的成本。</li>
</ul>
<h1 id="本章的重要概念-2"><a href="#本章的重要概念-2" class="headerlink" title="本章的重要概念"></a>本章的重要概念</h1><ul>
<li>链路是从一个结点到相邻结点的一段物理线路，数据链路则是在链路的基础上增加了一些必要的硬件 (如网络适配器) 和软件 (如协议的实现)。</li>
<li>数据链路层使用的信道有点对点信道和广播信道两种。</li>
<li>数据链路层传送的协议数据单元是帧。数据链路层的三个基本问题则是：封装成帧、透明传输和差错检测。</li>
<li>循环冗余检验 CRC 是一种检错方法，而帧检验序列 FCS 是添加在数据后面的冗余码。</li>
<li>点对点协议 PPP 是数据链路层使用最多的一种协议，它的特点是: <ol>
<li>简单；</li>
<li>只检测差错，而不是纠正差错；</li>
<li>不使用序号，也不进行流量控制；</li>
<li>可同时支持多种网络层协议。</li>
</ol>
</li>
<li>PPPoE 是为宽带上网的主机使用的链路层协议。</li>
<li>局域网的优点是：<ol>
<li>具有广播功能，从一个站点可很方便地访问全网；</li>
<li>便于系统的扩展和逐渐演变；提高了系统的可靠性、可用性和生存性。</li>
</ol>
</li>
<li>共享通信媒体资源的方法有两种: <ol>
<li>静态划分信道 (各种复用技术)；</li>
<li>动态媒体接入控制，又称为多点接入 (随机接入或受控接入)。</li>
</ol>
</li>
<li>IEEE 802  委员会曾把局域网的数据链路层拆成两个子层，即逻辑链路控制 (LLC) 子层 (与传输媒体无关) 和媒体接入控制 (MAC) 子层 (与传输媒体有关) 。但现在 LLC 子层已成为历史。</li>
<li>计算机与外界局域网的通信要通过通信适配器 (网络适配器)，它又称为网络接口卡或网卡。计算机的硬件地址就在适配器的 ROM 中。</li>
<li>以太网采用无连接的工作方式，对发送的数据帧不进行编号，也不要求对方发回确认。目的站收到有差错帧就把它丢弃，其他什么也不做。</li>
<li>以太网采用的协议是具有冲突检测的载波监听多点接入 CSMA&#x2F;CD。协议的要点是：发送前先监听，边发送边监听，一旦发现总线上出现了碰撞，就立即停止发送。然后按照退避算法等待一段随机时间后再次发送。因此，每一个站在自己发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。以太网上各站点都平等地争用以太网信道。</li>
<li>传统的总线以太网基本上都是使用集线器的双绞线以太网。这种以太网在物理上是星形网，但在逻辑上则是总线形网。集线器工作在物理层，它的每个接口仅仅简单地转发比特，不进行碰撞检测。</li>
<li>以太网的硬件地址，即 MAC 地址实际上就是适配器地址或适配器标识符，与主机所在的地点无关。源地址和目的地址都是 48 位长。</li>
<li>以太网的适配器有过滤功能，它只接收单播帧、广播帧或多播帧。</li>
<li>使用集线器可以在物理层扩展以太网 (扩展后的以太网仍然是一个网络)。</li>
<li>交换式集线器常称为以太网交换机或第二层交换机 (工作在数据链路层)，是一个多接口的网桥，每个接口都直接与某台单主机或另一个集线器相连，且工作在全双工方式。以太网交换机能同时连通许多对的接口，使每一对相互通信的主机都能像独占通信媒体那样，无碰撞地传输数据。</li>
<li>高速以太网有 100Mbit&#x2F;s 的快速以太网、吉比特以太网和 10Gbit&#x2F;s 的 10 吉比特以太网。最近还发展到 100 吉比特以太网。在宽带接入技术中，也常使用高速以太网进行接入。</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Chipfron</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://chipfron.github.io/2023/11/27/ji-suan-ji-wang-luo/">https://chipfron.github.io/2023/11/27/ji-suan-ji-wang-luo/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Chipfron</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/2023/11/27/ji-suan-ji-wang-luo/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/9.jpg" class="responsive-img" alt="计算机网络">
                        
                        <span class="card-title">计算机网络</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-11-27
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Chipfron
                            
                        </span>
                    </div>
                </div>

                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/11/26/hello-world/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/12.jpg" class="responsive-img" alt="Hello World">
                        
                        <span class="card-title">Hello World</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-11-26
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Chipfron
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2023</span>
            
            <a href="/about" target="_blank">Chipfron</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">40k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/chipfron" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1325964828@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1325964828" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1325964828" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
